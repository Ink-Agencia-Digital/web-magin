function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{j9aM:function(e,t,n){"use strict";n.r(t),n.d(t,"CrearEntradaPageModule",(function(){return R}));var i=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),r=n("tyNb"),c=n("mrSG"),s=n("fXoL"),u=n("a/9d"),l=n("8rbx"),d=n("7Vn+"),h=n("VnPy"),p=n("tAfe"),g=n("h7Fw"),b=n("3no8"),m=n("dNgK");function f(e,t){1&e&&(s.bc(0,"div"),s.bc(1,"div",19),s.Qc(2," PREGUNTAR "),s.ac(),s.ac())}function v(e,t){1&e&&(s.bc(0,"div"),s.bc(1,"div",19),s.Qc(2," COMPARTIR "),s.ac(),s.ac())}function x(e,t){1&e&&(s.bc(0,"div"),s.bc(1,"div",19),s.Qc(2," RETAR "),s.ac(),s.ac())}function k(e,t){if(1&e){var n=s.cc();s.bc(0,"ion-row",22),s.bc(1,"ion-icon",23),s.jc("click",(function(){s.Hc(n);var e=t.$implicit;return s.nc(2).removeImagen(e)})),s.ac(),s.Wb(2,"img",24),s.ac()}if(2&e){var i=t.$implicit;s.Ib(2),s.uc("src",i,s.Jc)}}function y(e,t){if(1&e&&(s.bc(0,"div",20),s.Oc(1,k,3,1,"ion-row",21),s.ac()),2&e){var n=s.nc();s.Ib(1),s.uc("ngForOf",n.photos)}}var C,w,P,I=function(e){return{background:e}},j=function(e){return{color:e}},O=[{path:"",component:(C=function(){function e(t,n,i,a,o,r,c,s,u,l,d,h){_classCallCheck(this,e),this.camara=t,this.actionSheetcontroller=n,this.log=i,this.loadingCtrl=a,this.auth=o,this.share=r,this.imagePick=c,this.alertController=s,this.pObjecto=u,this.router=l,this.loadingService=d,this.snackbar=h,this.colors=["#3dc2ff","#3880ff","#eb445a"],this.sliderImgOption={zoom:!1,slidesPerView:1,cemteredSlides:!0,spaceBetween:0},this.usertk=null,this.getToken()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.pObjecto.getNavData();this.idAction=t.idAction,this.actividad=t.actividad,this.share.varDesafio.subscribe((function(t){var n=e.pObjecto.getNavData();e.actividad=n.actividad})),this.sFotos=[],this.photos=[],this.auth.gettokenLog().then((function(t){e.log.logdataInfData(t).subscribe((function(t){e.usertk=t}))}))}},{key:"getToken",value:function(){var e=this;this.auth.gettokenLog().then((function(t){e.token=t}))}},{key:"vistaHolder",value:function(e){return 1===e?"\xbfComo est\xe1s entrenando?":2===e?" Muestra c\xf3mo compites":3===e?"\xa1Reta a la comunidad! \xa1Crea un desaf\xedo!":void 0}},{key:"selccionImg",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetcontroller.create({header:"Seleccione una imagen",cssClass:"match-item-action-sheet",buttons:[{text:"Galer\xeda",icon:"image-outline",handler:function(){n.usarGaleria()}},{text:"C\xe1mara",icon:"camera-outline",handler:function(){n.usarCamara()}},{text:"Cancelar",icon:"close-outline",role:"cancel"}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"presentLoading",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingCtrl.create({message:"Cargando Datos..."});case 2:return this.loading=e.sent,e.abrupt("return",this.loading.present());case 4:case"end":return e.stop()}}),e,this)})))}},{key:"usarCamara",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.photos.length<5)){e.next=6;break}return t={quality:100,correctOrientation:!0,destinationType:this.camara.DestinationType.DATA_URL,encodingType:this.camara.EncodingType.JPEG,mediaType:this.camara.MediaType.PICTURE},e.next=4,this.camara.getPicture(t).then((function(e){n.photos.push("data:image/jpeg;base64,"+e)})).catch((function(e){"No Image Selected"==e&&n.mostrarmensaje("No se seleccion\xf3 ninguna imagen","Error","red-snackbar")}));case 4:e.next=7;break;case 6:this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"usarGaleria",value:function(){var e=this;this.photos.length<5?this.imagePick.hasReadPermission().then((function(t){0==t?e.imagePick.requestReadPermission():1==t&&e.imagePick.getPictures({maximumImagesCount:5-e.photos.length,quality:100,outputType:1}).then((function(t){for(var n=0;n<t.length;n++)e.photos.push("data:image/jpeg;base64,"+t[n])})).catch((function(t){e.mostrarmensaje("Se presento un error al cargar las im\xe1genes, por favor comun\xedquese con el administrador.","Error","red-snackbar")}))})):this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar")}},{key:"removeImagen",value:function(e){var t=this.photos.findIndex((function(t){return t===e}));t>=0&&this.photos.splice(t,1)}},{key:"mostrarmensaje",value:function(e,t,n){this.snackbar.open(e,t,{duration:2e3,panelClass:[n]})}},{key:"Publicar",value:function(){var e=this;if(this.textareainput){this.loadingService.loadingPresent({spinner:"circles"}),1===this.idAction&&(this.textareainput="!Informa: "+this.textareainput),2===this.idAction&&(this.textareainput="@Comparte: "+this.textareainput),3===this.idAction&&(this.textareainput="#Reto: "+this.textareainput);var t=new Array;this.photos.length>0&&this.photos.map((function(e){t.push({image:e})})),this.share.guardarpost({user_id:this.usertk.id,post:this.textareainput,medias:t},this.token).subscribe((function(t){e.loadingService.loadingDismiss(),e.share.varPostUpdate.next("update data"),e.router.navigate(["/users/social"])}),(function(t){e.loadingService.loadingDismiss()}))}else this.alertDespuesTiempo()}},{key:"alertDespuesTiempo",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"HEY!",subHeader:"Debes Escribir algo",message:"Dinos que piensas, no puede ir vac\xedo",buttons:["Acepto"]});case 2:return this.alert=e.sent,e.next=5,this.alert.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"volver",value:function(){this.actividad="",this.router.navigate(["/users/social"])}}]),e}(),C.\u0275fac=function(e){return new(e||C)(s.Vb(u.a),s.Vb(o.a),s.Vb(l.a),s.Vb(o.gb),s.Vb(d.a),s.Vb(h.a),s.Vb(p.a),s.Vb(o.b),s.Vb(g.a),s.Vb(r.h),s.Vb(b.a),s.Vb(m.a))},C.\u0275cmp=s.Pb({type:C,selectors:[["app-crear-entrada"]],decls:32,vars:17,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"font-size","30px","color","white",3,"click"],["name","arrow-back-outline"],[1,"tituloInfo","logo"],[2,"color","white"],[1,"oval",3,"ngStyle"],[1,"back"],[4,"ngIf"],["align","center"],["size","2",1,"col-img"],[3,"src"],["size","9"],["fill","clear","rows","4","cols","150","maxlength","150",1,"textArea",3,"ngModel","placeholder","ngModelChange"],["fill","clear",2,"margin","0",3,"ngStyle","click"],["name","cloud-upload",2,"margin-right","5px"],["fill","clear",2,"margin","0",3,"ngStyle","disabled","click"],["name","send",2,"margin-right","5px"],[2,"padding-top","0px"],["style","padding: 0px 30px 0px 60px;",4,"ngIf"],["align","center",1,"title"],[2,"padding","0px 30px 0px 60px"],["style","place-content: flex-end;margin-bottom: 10px;",4,"ngFor","ngForOf"],[2,"place-content","flex-end","margin-bottom","10px"],["name","close-outline",1,"remove-image",3,"click"],[1,"img-content",3,"src"]],template:function(e,t){1&e&&(s.bc(0,"ion-header"),s.bc(1,"ion-toolbar",0),s.bc(2,"ion-buttons",1),s.jc("click",(function(){return t.volver()})),s.Wb(3,"ion-icon",2),s.ac(),s.bc(4,"ion-title",3),s.bc(5,"label",4),s.Qc(6,"MAGIN"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(7,"ion-content"),s.Wb(8,"div",5),s.bc(9,"div",6),s.Wb(10,"br"),s.Oc(11,f,3,0,"div",7),s.Oc(12,v,3,0,"div",7),s.Oc(13,x,3,0,"div",7),s.Wb(14,"br"),s.Wb(15,"br"),s.bc(16,"ion-row"),s.Wb(17,"div",8),s.ac(),s.bc(18,"ion-row"),s.bc(19,"ion-col",9),s.Wb(20,"img",10),s.ac(),s.bc(21,"ion-col",11),s.bc(22,"textarea",12),s.jc("ngModelChange",(function(e){return t.textareainput=e})),s.ac(),s.bc(23,"ion-button",13),s.jc("click",(function(){return t.selccionImg()})),s.Wb(24,"ion-icon",14),s.Qc(25," Cargar Imagen "),s.ac(),s.bc(26,"ion-button",15),s.jc("click",(function(){return t.Publicar()})),s.Wb(27,"ion-icon",16),s.Qc(28," Compartir "),s.ac(),s.ac(),s.ac(),s.bc(29,"ion-row"),s.bc(30,"ion-col",17),s.Oc(31,y,2,1,"div",18),s.ac(),s.ac(),s.ac(),s.ac()),2&e&&(s.Ib(8),s.uc("ngStyle",s.zc(11,I,t.colors[t.idAction-1])),s.Ib(3),s.uc("ngIf",1==t.idAction),s.Ib(1),s.uc("ngIf",2==t.idAction),s.Ib(1),s.uc("ngIf",3==t.idAction),s.Ib(7),s.wc("src","/assets/social/im",t.idAction,".png",s.Jc),s.Ib(2),s.uc("ngModel",t.textareainput)("placeholder",t.vistaHolder(t.idAction)),s.Ib(1),s.uc("ngStyle",s.zc(13,j,t.colors[t.idAction-1])),s.Ib(3),s.uc("ngStyle",s.zc(15,j,t.colors[t.idAction-1]))("disabled",!t.textareainput),s.Ib(5),s.uc("ngIf",t.photos))},directives:[o.y,o.db,o.k,o.z,o.cb,o.s,i.n,i.m,o.P,o.r,a.c,a.l,a.p,a.s,o.j,i.l],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.textArea[_ngcontent-%COMP%]{width:100%;max-width:500px;height:150px;display:block;resize:none;padding:10px;outline:0;border-radius:10px;border:1px solid #d2d2d2;margin:0 auto;background-color:#fff;text-align:center;color:#000}.title[_ngcontent-%COMP%]{font-size:18px;position:relative;color:#fff}.col-img[_ngcontent-%COMP%]{display:flex;align-items:center}.oval[_ngcontent-%COMP%]{width:100%;height:10%;border-radius:0 0 100px 100px;position:absolute}ion-slides[_ngcontent-%COMP%]{background:rgba(104,103,103,.151);width:50%;height:20%;border-radius:8px}.back[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.555)}  .match-item-action-sheet .action-sheet-group.sc-ion-action-sheet-md{border-top-left-radius:0;border-top-right-radius:0;background-color:#fff}  .match-item-action-sheet .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-icon.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-title.sc-ion-action-sheet-md{color:#000}.img-content[_ngcontent-%COMP%]{border-radius:10px;padding:15px;border:1px solid #e8e8e8;background-color:#e8e8e8;width:100%}  .match-item-action-sheet .action-sheet-group-cancel .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-group-cancel .action-sheet-icon.sc-ion-action-sheet-md{color:#f44336}.remove-image[_ngcontent-%COMP%]{position:absolute;padding:0 1px;margin:20px;font-size:22px;background-color:#ff4b4b;border-radius:10px;color:#fff;font-weight:700}"]}),C)}],A=((P=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:P}),P.\u0275inj=s.Sb({factory:function(e){return new(e||P)},imports:[[r.j.forChild(O)],r.j]}),P),R=((w=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:w}),w.\u0275inj=s.Sb({factory:function(e){return new(e||w)},imports:[[i.c,a.k,o.eb,A]]}),w)}}]);