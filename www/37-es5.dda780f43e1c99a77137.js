function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var a=0;a<n.length;a++){var i=n[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,a){return n&&_defineProperties(e.prototype,n),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{wcDs:function(e,n,a){"use strict";a.r(n),a.d(n,"ExamenPageModule",(function(){return _}));var i=a("ofXK"),t=a("3Pt+"),r=a("TEn/"),c=a("tyNb"),o=a("mrSG"),s=a("fXoL"),l=a("7Vn+"),u=a("KB8S"),d=a("h7Fw"),p=a("3no8"),b=a("VnPy"),g=a("dNgK"),f=a("8rbx"),h=["slider"];function m(e,n){if(1&e){var a=s.cc();s.bc(0,"ion-textarea",28),s.jc("ngModelChange",(function(e){return s.Hc(a),s.nc().$implicit.answer=e}))("ionChange",(function(){s.Hc(a);var e=s.nc().$implicit;return s.nc(2).validate(e.answer)})),s.ac()}if(2&e){var i=s.nc().$implicit;s.uc("ngModel",i.answer)}}function x(e,n){if(1&e){var a=s.cc();s.bc(0,"ion-item"),s.bc(1,"ion-range",29),s.jc("ngModelChange",(function(e){return s.Hc(a),s.nc().$implicit.answer=e}))("ionChange",(function(){s.Hc(a);var e=s.nc().$implicit;return s.nc(2).validate(e.answer)}))("ionFocus",(function(){return s.Hc(a),s.nc(3).block()})),s.bc(2,"ion-label",30),s.Qc(3,"1"),s.ac(),s.bc(4,"ion-label",31),s.Qc(5,"5"),s.ac(),s.ac(),s.ac()}if(2&e){var i=s.nc().$implicit;s.Ib(1),s.uc("ngModel",i.answer)}}function v(e,n){if(1&e&&(s.bc(0,"ion-item"),s.bc(1,"ion-label",35),s.Qc(2),s.ac(),s.Wb(3,"ion-radio",36),s.ac()),2&e){var a=n.$implicit;s.Ib(2),s.Rc(a),s.Ib(1),s.vc("value",a)}}function k(e,n){if(1&e){var a=s.cc();s.bc(0,"ion-list",32),s.bc(1,"ion-radio-group",33),s.jc("ngModelChange",(function(e){return s.Hc(a),s.nc().$implicit.answer=e}))("ionChange",(function(){s.Hc(a);var e=s.nc().$implicit;return s.nc(2).validate(e.answer)})),s.bc(2,"ion-list-header"),s.bc(3,"ion-label"),s.Qc(4," Opciones de respuestas "),s.ac(),s.ac(),s.Oc(5,v,4,2,"ion-item",34),s.ac(),s.ac()}if(2&e){var i=s.nc().$implicit;s.Ib(1),s.uc("ngModel",i.answer),s.Ib(4),s.uc("ngForOf",i.respuestas)}}function w(e,n){if(1&e){var a=s.cc();s.bc(0,"ion-slide",18),s.bc(1,"div"),s.bc(2,"ion-badge",19),s.Qc(3),s.ac(),s.ac(),s.bc(4,"h1",20),s.Qc(5),s.ac(),s.Oc(6,m,1,1,"ion-textarea",21),s.Oc(7,x,6,1,"ion-item",22),s.Oc(8,k,6,2,"ion-list",23),s.bc(9,"ion-card-content",24),s.Wb(10,"div",15),s.bc(11,"div",16),s.bc(12,"ion-label"),s.Qc(13,"Recuerda deslizar la pantalla a la izquierda para cambiar de pregunta y avanzar en el examen."),s.ac(),s.ac(),s.ac(),s.bc(14,"div",25),s.bc(15,"ion-button",26),s.jc("click",(function(){return s.Hc(a),s.nc(2).post()})),s.Wb(16,"ion-icon",27),s.Qc(17," Terminar "),s.ac(),s.ac(),s.ac()}if(2&e){var i=n.$implicit,t=n.index,r=s.nc(2);s.Ib(3),s.Tc("",t+1,"/",r.preguntas.length,""),s.Ib(2),s.Rc(i.pregunta),s.Ib(1),s.uc("ngIf","Abierta"===i.tiporespuesta),s.Ib(1),s.uc("ngIf","Num\xe9rica"===i.tiporespuesta),s.Ib(1),s.uc("ngIf","Multiple"===i.tiporespuesta),s.Ib(1),s.uc("hidden",t+1===r.preguntas.length),s.Ib(5),s.uc("hidden",t+1!==r.preguntas.length),s.Ib(1),s.uc("disabled",!i.answer)}}function C(e,n){if(1&e){var a=s.cc();s.bc(0,"ion-slides",7,8),s.jc("ionSlideWillChange",(function(){return s.Hc(a),s.nc().checkSlide()})),s.bc(2,"ion-slide",9),s.bc(3,"div",10),s.bc(4,"p"),s.Qc(5," Felicidades, acabas de terminar todas las lecciones del curso "),s.bc(6,"strong"),s.Qc(7),s.ac(),s.Qc(8,", a continuaci\xf3n debes responder un examen, recuerda que al finalizar dependiendo de tu calificaci\xf3n obtendr\xe1s un trofeo. "),s.ac(),s.ac(),s.bc(9,"div",10),s.bc(10,"ion-label",11),s.Qc(11,"N\xfamero de preguntas del examen:"),s.ac(),s.bc(12,"div",12),s.bc(13,"ion-badge",13),s.Qc(14),s.ac(),s.ac(),s.ac(),s.bc(15,"ion-card-content",14),s.Wb(16,"div",15),s.bc(17,"div",16),s.bc(18,"ion-label"),s.Qc(19,"Recuerda deslizar la pantalla a la izquierda para dar inicio al examen."),s.ac(),s.ac(),s.ac(),s.ac(),s.Oc(20,w,18,9,"ion-slide",17),s.ac()}if(2&e){var i=s.nc();s.Ib(7),s.Rc(i.informacion.infoCurso.name),s.Ib(7),s.Rc(i.preguntas.length),s.Ib(6),s.uc("ngForOf",i.preguntas)}}function y(e,n){1&e&&(s.bc(0,"div",37),s.bc(1,"ion-badge",38),s.Qc(2,"No existen preguntas para el curso"),s.ac(),s.ac())}var I,j,O,M=[{path:"",component:(I=function(){function e(n,a,i,t,r,c,o,s,l){_classCallCheck(this,e),this.auth=n,this.pObjectIndex=a,this.pObjecto=i,this.loadingService=t,this.share=r,this.router=c,this.alertController=o,this.snackbar=s,this.log=l,this.user=null,this.id=null,this.preguntas=[],this.getToken(),this.refreshPage()}return _createClass(e,[{key:"ngOnInit",value:function(){this.leccion=this.pObjectIndex.getData(),this.informacion=this.pObjecto.getNavData()}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"refreshPage",value:function(){var e=this;this.subscription=this.share.varExamen.subscribe((function(n){e.loadPage()}))}},{key:"getToken",value:function(){var e=this;this.auth.gettokenLog().then((function(n){e.token=n,e.log.logdataInfData(e.token).subscribe((function(n){e.user=n,e.loadPage()}))}))}},{key:"loadPage",value:function(){var e=this;this.share.obtenerCursos(this.token).subscribe((function(n){if(n.data.length>0){var a=n.data.find((function(n){return n.id===e.informacion.infoCurso.id}));a?a.examen?e.share.obtenerExamenes(a.examen.id,e.token).subscribe((function(n){n.data.length>0&&(e.preguntas=n.data,e.preguntas.map((function(n){n.id_user=e.user.id,"Multiple"===n.tiporespuesta&&(n.respuestas=n.opciones.split(","))})),setTimeout((function(){e.slidefromHtml.lockSwipes(!1)}),100))}),(function(n){e.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")})):e.mostrarmensaje("El curso no tiene configurado un examen","Error","red-snackbar"):e.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}else e.mostrarmensaje("No existen cursos","Error","red-snackbar")}),(function(n){e.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}))}},{key:"checkSlide",value:function(){var e=this;this.slidefromHtml.getActiveIndex().then((function(n){e.slidefromHtml.lockSwipeToNext(!(0===n||e.preguntas[n-1]&&e.preguntas[n-1].answer))}))}},{key:"block",value:function(){this.slidefromHtml.lockSwipes(!0)}},{key:"validate",value:function(e){this.slidefromHtml.lockSwipes(!1),this.slidefromHtml.lockSwipeToNext(!e)}},{key:"post",value:function(){var e=this,n=[];this.preguntas.map((function(e){n.push({id_user:e.id_user,id_examen:e.id_examen,pregunta:e.pregunta,respuesta:e.answer,valor:e.valor})})),n.length>0?this.share.guardarExamenes(n,this.token).subscribe((function(n){e.loadingService.showMessageCoins("15"),e.alertProgreso(),e.share.varLeciones.next(),e.router.navigateByUrl("/users/entrena/vercurso")}),(function(n){e.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")})):this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}},{key:"alertProgreso",value:function(){return Object(o.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"Felicidades",subHeader:"Terminaste el examen",message:"Espera a que tu examen sea calificado y ve a la secci\xf3n de trofeos e insignias para descubrir tu trofeo",buttons:["OK"]});case 2:return this.alert=e.sent,e.next=5,this.alert.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"mostrarmensaje",value:function(e,n,a){this.snackbar.open(e,n,{duration:2e3,panelClass:[a]})}}]),e}(),I.\u0275fac=function(e){return new(e||I)(s.Vb(l.a),s.Vb(u.a),s.Vb(d.a),s.Vb(p.a),s.Vb(b.a),s.Vb(c.h),s.Vb(r.b),s.Vb(g.a),s.Vb(f.a))},I.\u0275cmp=s.Pb({type:I,selectors:[["app-examen"]],viewQuery:function(e,n){var a;1&e&&s.Wc(h,!0),2&e&&s.Dc(a=s.kc())&&(n.slidefromHtml=a.first)},decls:12,vars:2,consts:[[1,"ion-toolbar-ccs"],[1,"tituloInfo","logo"],[2,"color","white"],[2,"text-align","center","margin-top","15px"],[2,"font-weight","500","font-size","18px","width","100%","background","#002a68","padding","10px","text-transform","uppercase"],["pager","true",3,"ionSlideWillChange",4,"ngIf"],["style","text-align: center; margin-top: 10px;",4,"ngIf"],["pager","true",3,"ionSlideWillChange"],["slider",""],[1,"slide-examen",2,"display","block"],[2,"padding","10px 25px","text-align","justify"],[2,"display","block","text-align","center"],[2,"text-align-last","center"],[2,"font-weight","500","font-size","15px","background","#002a68","padding","5px 8px","margin-top","10px"],[2,"padding","0px 5px 20px"],[1,"card","card-3"],[1,"label-swipe"],["style","width: 360px;display: block;padding: 5px 25px;",4,"ngFor","ngForOf"],[2,"width","360px","display","block","padding","5px 25px"],[2,"font-size","15px","font-weight","500","padding","6px 10px","border-radius","10px"],[2,"margin","0","font-size","20px","padding","0px 10px"],["class","answer-open","placeholder","Digita tu respuesta",3,"ngModel","ngModelChange","ionChange",4,"ngIf"],[4,"ngIf"],["style","height: 250px;overflow: auto;",4,"ngIf"],[2,"padding","0px 5px 20px",3,"hidden"],[2,"margin-top","15px",3,"hidden"],["size","small",1,"footer-dis-bot1",3,"disabled","click"],["name","enter-outline"],["placeholder","Digita tu respuesta",1,"answer-open",3,"ngModel","ngModelChange","ionChange"],["min","1","max","5","pin","","snaps","","color","secondary","debounce","500",3,"ngModel","ngModelChange","ionChange","ionFocus"],["slot","start"],["slot","end"],[2,"height","250px","overflow","auto"],[3,"ngModel","ngModelChange","ionChange"],[4,"ngFor","ngForOf"],[2,"white-space","break-spaces"],[3,"value"],[2,"text-align","center","margin-top","10px"],[2,"font-size","15px","font-weight","500","background","#ff9800","color","black"]],template:function(e,n){1&e&&(s.bc(0,"ion-header"),s.bc(1,"ion-toolbar",0),s.bc(2,"ion-title",1),s.bc(3,"label",2),s.Qc(4,"MAGIN"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(5,"ion-content"),s.bc(6,"div",3),s.bc(7,"ion-badge",4),s.Qc(8,"Examen"),s.ac(),s.ac(),s.bc(9,"ion-content"),s.Oc(10,C,21,3,"ion-slides",5),s.Oc(11,y,3,0,"div",6),s.ac(),s.ac()),2&e&&(s.Ib(10),s.uc("ngIf",n.preguntas.length>0),s.Ib(1),s.uc("ngIf",0===n.preguntas.length))},directives:[r.y,r.db,r.cb,r.s,r.i,i.m,r.W,r.V,r.F,r.m,i.l,r.j,r.z,r.ab,r.pb,t.p,t.s,r.E,r.L,r.ob,r.G,r.K,r.H,r.J,r.mb],styles:[".question[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.answer-open[_ngcontent-%COMP%]{border:1px solid #d4d4d4;border-radius:10px;font-size:14px;height:324px}.card-3[_ngcontent-%COMP%]{background-image:url(swipe.1a8c7cab8aa37c661926.gif);background-repeat:no-repeat;background-position:50%;background-size:113px;box-shadow:none!important;border-radius:10px;height:130px}.label-swipe[_ngcontent-%COMP%]{text-align:justify;padding:20px 10px}.slide-examen[_ngcontent-%COMP%]{display:block!important}"]}),I)}],P=((O=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:O}),O.\u0275inj=s.Sb({factory:function(e){return new(e||O)},imports:[[c.j.forChild(M)],c.j]}),O),_=((j=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:j}),j.\u0275inj=s.Sb({factory:function(e){return new(e||j)},imports:[[i.c,t.k,r.eb,P]]}),j)}}]);