(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Ppmg:function(t,e,i){"use strict";i.r(e),i.d(e,"ExamenPageModule",(function(){return E}));var s=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),n=i("mrSG");class c{}var l=i("fXoL"),h=i("h7Fw"),u=i("9bwK"),b=i("J2Na"),p=i("0Wod"),g=i("KB8S"),d=i("VnPy"),m=i("3no8"),f=i("7Vn+"),x=i("1as6");function v(t,e){if(1&t){const t=l.cc();l.bc(0,"ion-item"),l.bc(1,"ion-checkbox",14),l.jc("ngModelChange",(function(i){return l.Hc(t),e.$implicit.select=i}))("click",(function(){l.Hc(t);const i=e.$implicit,s=l.nc().$implicit;return l.nc().obtenerVal(s.p,i,s.co)})),l.ac(),l.bc(2,"ion-label"),l.Qc(3),l.oc(4,"capitalize"),l.ac(),l.ac()}if(2&t){const t=e.$implicit;l.Ib(1),l.uc("ngModel",t.select),l.Ib(2),l.Rc(l.pc(4,2,t.dt))}}function D(t,e){if(1&t){const t=l.cc();l.bc(0,"div"),l.bc(1,"ion-card",7),l.bc(2,"div",8),l.bc(3,"ion-badge",9),l.Qc(4,"Examen Final"),l.ac(),l.ac(),l.bc(5,"ion-card-subtitle",10),l.Qc(6),l.oc(7,"capitalize"),l.ac(),l.bc(8,"ion-card-content",11),l.Oc(9,v,5,4,"ion-item",6),l.bc(10,"ion-button",12),l.jc("click",(function(){return l.Hc(t),l.nc().calificar()})),l.Wb(11,"ion-icon",13),l.Qc(12,"Enviar mi respuesta "),l.ac(),l.ac(),l.ac(),l.ac()}if(2&t){const t=e.$implicit,i=l.nc();l.Ib(6),l.Rc(l.pc(7,3,t.p)),l.Ib(3),l.uc("ngForOf",t.op),l.Ib(1),l.uc("disabled",i.tama!==i.totalExam.length)}}const O=[{path:"",component:(()=>{class t{constructor(t,e,i,s,o,a,r,n,c,l){this.pObjecto=t,this.pObjectExamen=e,this.pObjectAux=i,this.pObjectVideo=s,this.pObjectIndex=o,this.alertController=a,this.share=r,this.router=n,this.loadingService=c,this.auth=l,this.examenDT=null,this.dt=[],this.cursos=[],this.getToken()}ngOnInit(){}getToken(){this.auth.gettokenLog().then(t=>{this.token=t,this.loadPage()})}loadPage(){this.totalExam=[];const t=this.pObjectExamen.getNavData();this.examenDT=t.examen.exam,this.tama=this.examenDT.length,this.indexLection=this.pObjectIndex.getData();const e=this.pObjectAux.getNavData();e&&(this.color=e.color,this.data=e.infoCurso,this.userinfo=e.userInf,this.course=e.course.name,this.courseID=e.infoCurso.id),this.getCourse()}getCourse(){this.loadingService.loadingPresent({spinner:"circles"}),this.share.getCursoEspecifico(this.data.id,this.token).subscribe(t=>Object(n.b)(this,void 0,void 0,(function*(){this.info=t.data,this.share.getComentariosCurso(this.data.id,this.token).subscribe(t=>{this.comentariosGeneral=t.data,this.share.getCursosUsuario(this.userinfo.id,this.token).subscribe(t=>{let e=t.data.filter(t=>t.id===this.courseID);e.forEach(t=>{this.CourseLessonID=t.id,this.progreso=t.pivot.progress}),this.cursos=e,this.cursos.forEach(t=>{this.numLecciones=t.lessons.length}),this.loadingService.loadingDismiss()},t=>{this.loadingService.loadingDismiss()})},t=>{this.loadingService.loadingDismiss()})})),t=>{this.loadingService.loadingDismiss()})}obtenerVal(t,e,i){this.valorChange=e,this.examenDT.filter(s=>{if(0===this.totalExam.length)this.totalExam.push({pregunta:t,val:e,corec:i});else if(this.totalExam.length>0)if(s.p===t){let s={pregunta:t,val:e,corec:i},o=this.totalExam.map(t=>t.pregunta).indexOf(t);this.totalExam[o]=s}else if(s.p!==t){let s={pregunta:t,val:e,corec:i},o=this.totalExam.map(t=>t.pregunta).indexOf(t);-1===o?this.totalExam.push({pregunta:t,val:e,corec:i}):this.totalExam[o]=s}}),this.examenDT.length>0&&this.examenDT.filter(e=>e.p===t).forEach(t=>{t.op.forEach(t=>{t.id!==e.id&&(t.select=!1)})})}calificar(){let t=0,e=0;this.totalExam.forEach(i=>{i.val.id===+i.corec?t+=1:e+=1}),this.alertDespuesTiempo(t,e),this.pObjecto.setData(this.pObjectAux.getNavData()),this.pObjectVideo.setData(this.pObjectAux.getNavData()),this.pObjectExamen.setData(this.pObjectAux.getNavData()),this.guardaProgreso(this.progreso),this.router.navigateByUrl("/users/entrena/vercurso")}alertDespuesTiempo(t,e){return Object(n.b)(this,void 0,void 0,(function*(){this.alert=yield this.alertController.create({header:"Felicidades",subHeader:"Completaste el examen tu puntaje es",message:"Correcto: "+t+"\n\nIncorrecto: "+e,buttons:["Acepto"]}),yield this.alert.present()}))}alertProgreso(){return Object(n.b)(this,void 0,void 0,(function*(){this.alert=yield this.alertController.create({header:"Felicidades",subHeader:"Terminaste la lecci\xf3n",message:"Pasa a la siguiente lecci\xf3n para incrementar tu progreso",buttons:["Acepto"]}),yield this.alert.present()}))}guardaProgreso(t){this.user=new c;let e=t;if(this.newProgress=1/this.numLecciones,e>=.6&&e<1&&3==this.numLecciones)this.user.progress=1,this.share.actualizarProgreso(this.userinfo.id,this.courseID,this.user.progress,this.token).subscribe(()=>{this.alertProgreso()});else if(0==e&&e<1)this.user.progress=parseFloat(this.newProgress.toFixed(2)),this.share.actualizarProgreso(this.userinfo.id,this.courseID,this.user.progress,this.token).subscribe(()=>{}),this.alertProgreso();else if(0!==e&&e<1){let t;this.newProgress=this.newProgress+e,t=parseFloat(this.newProgress.toFixed(2)),this.user.progress=t,this.share.actualizarProgreso(this.userinfo.id,this.courseID,this.user.progress,this.token).subscribe(()=>{this.alertProgreso()})}}}return t.\u0275fac=function(e){return new(e||t)(l.Vb(h.a),l.Vb(u.a),l.Vb(b.a),l.Vb(p.a),l.Vb(g.a),l.Vb(a.b),l.Vb(d.a),l.Vb(r.h),l.Vb(m.a),l.Vb(f.a))},t.\u0275cmp=l.Pb({type:t,selectors:[["app-examen"]],decls:9,vars:1,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"color","white"],["defaultHref","/users/entrena/cursos-categorias"],[1,"tituloInfo","logo"],[1,"color-blue",2,"color","white"],["align","center"],[4,"ngFor","ngForOf"],["align","center",2,"margin","0"],[2,"margin","15px 0px 0px 0px","text-align-last","center"],["color","primary",1,"badge-title"],[2,"color","black","margin-top","4%","margin-top","10px","font-size","16px"],[2,"text-transform","capitalize","color","black"],[1,"btn-submit",3,"disabled","click"],["name","pencil-outline",2,"margin-left","5px"],["slot","end","color","primary",3,"ngModel","ngModelChange","click"]],template:function(t,e){1&t&&(l.bc(0,"ion-header"),l.bc(1,"ion-toolbar",0),l.bc(2,"ion-buttons",1),l.Wb(3,"ion-back-button",2),l.ac(),l.bc(4,"ion-title",3),l.bc(5,"label",4),l.Qc(6,"MAGIN"),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(7,"ion-content",5),l.Oc(8,D,13,5,"div",6),l.ac()),2&t&&(l.Ib(8),l.uc("ngForOf",e.examenDT))},directives:[a.y,a.db,a.k,a.g,a.h,a.cb,a.s,s.l,a.l,a.i,a.o,a.m,a.j,a.z,a.E,a.q,a.c,o.p,o.s,a.F],pipes:[x.a],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.badge-title[_ngcontent-%COMP%]{font-size:18px;padding:10px;border-radius:7px;font-weight:500;background-color:#002a68}.btn-submit[_ngcontent-%COMP%]{margin-top:15px;--background:#002a68}"]}),t})()}];let P=(()=>{class t{}return t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({factory:function(e){return new(e||t)},imports:[[r.j.forChild(O)],r.j]}),t})();var j=i("HsBR");let E=(()=>{class t{}return t.\u0275mod=l.Tb({type:t}),t.\u0275inj=l.Sb({factory:function(e){return new(e||t)},imports:[[s.c,o.k,a.eb,P,j.a]]}),t})()}}]);