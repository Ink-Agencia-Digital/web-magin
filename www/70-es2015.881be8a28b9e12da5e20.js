(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{j9aM:function(t,e,i){"use strict";i.r(e),i.d(e,"CrearEntradaPageModule",(function(){return j}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),s=i("mrSG"),r=i("fXoL"),l=i("a/9d"),d=i("8rbx"),h=i("7Vn+"),u=i("VnPy"),g=i("tAfe"),b=i("h7Fw"),p=i("3no8"),m=i("dNgK");function f(t,e){1&t&&(r.bc(0,"div"),r.bc(1,"div",19),r.Qc(2," PREGUNTAR "),r.ac(),r.ac())}function x(t,e){1&t&&(r.bc(0,"div"),r.bc(1,"div",19),r.Qc(2," COMPARTIR "),r.ac(),r.ac())}function v(t,e){1&t&&(r.bc(0,"div"),r.bc(1,"div",19),r.Qc(2," RETAR "),r.ac(),r.ac())}function k(t,e){if(1&t){const t=r.cc();r.bc(0,"ion-row",22),r.bc(1,"ion-icon",23),r.jc("click",(function(){r.Hc(t);const i=e.$implicit;return r.nc(2).removeImagen(i)})),r.ac(),r.Wb(2,"img",24),r.ac()}if(2&t){const t=e.$implicit;r.Ib(2),r.uc("src",t,r.Jc)}}function y(t,e){if(1&t&&(r.bc(0,"div",20),r.Oc(1,k,3,1,"ion-row",21),r.ac()),2&t){const t=r.nc();r.Ib(1),r.uc("ngForOf",t.photos)}}const I=function(t){return{background:t}},C=function(t){return{color:t}},P=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,a,c,s,r,l,d,h){this.camara=t,this.actionSheetcontroller=e,this.log=i,this.loadingCtrl=n,this.auth=o,this.share=a,this.imagePick=c,this.alertController=s,this.pObjecto=r,this.router=l,this.loadingService=d,this.snackbar=h,this.colors=["#3dc2ff","#3880ff","#eb445a"],this.sliderImgOption={zoom:!1,slidesPerView:1,cemteredSlides:!0,spaceBetween:0},this.usertk=null,this.getToken()}ngOnInit(){const t=this.pObjecto.getNavData();this.idAction=t.idAction,this.actividad=t.actividad,this.share.varDesafio.subscribe(t=>{const e=this.pObjecto.getNavData();this.actividad=e.actividad}),this.sFotos=[],this.photos=[],this.auth.gettokenLog().then(t=>{this.log.logdataInfData(t).subscribe(t=>{this.usertk=t})})}getToken(){this.auth.gettokenLog().then(t=>{this.token=t})}vistaHolder(t){return 1===t?"\xbfComo est\xe1s entrenando?":2===t?" Muestra c\xf3mo compites":3===t?"\xa1Reta a la comunidad! \xa1Crea un desaf\xedo!":void 0}selccionImg(){return Object(s.b)(this,void 0,void 0,(function*(){const t=yield this.actionSheetcontroller.create({header:"Seleccione una imagen",cssClass:"match-item-action-sheet",buttons:[{text:"Galer\xeda",icon:"image-outline",handler:()=>{this.usarGaleria()}},{text:"C\xe1mara",icon:"camera-outline",handler:()=>{this.usarCamara()}},{text:"Cancelar",icon:"close-outline",role:"cancel"}]});yield t.present()}))}presentLoading(){return Object(s.b)(this,void 0,void 0,(function*(){return this.loading=yield this.loadingCtrl.create({message:"Cargando Datos..."}),this.loading.present()}))}usarCamara(){return Object(s.b)(this,void 0,void 0,(function*(){if(this.photos.length<5){const t={quality:100,correctOrientation:!0,destinationType:this.camara.DestinationType.DATA_URL,encodingType:this.camara.EncodingType.JPEG,mediaType:this.camara.MediaType.PICTURE};yield this.camara.getPicture(t).then(t=>{this.photos.push("data:image/jpeg;base64,"+t)}).catch(t=>{"No Image Selected"==t&&this.mostrarmensaje("No se seleccion\xf3 ninguna imagen","Error","red-snackbar")})}else this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar")}))}usarGaleria(){this.photos.length<5?this.imagePick.hasReadPermission().then(t=>{0==t?this.imagePick.requestReadPermission():1==t&&this.imagePick.getPictures({maximumImagesCount:5-this.photos.length,quality:100,outputType:1}).then(t=>{for(var e=0;e<t.length;e++)this.photos.push("data:image/jpeg;base64,"+t[e])}).catch(t=>{this.mostrarmensaje("Se presento un error al cargar las im\xe1genes, por favor comun\xedquese con el administrador.","Error","red-snackbar")})}):this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar")}removeImagen(t){const e=this.photos.findIndex(e=>e===t);e>=0&&this.photos.splice(e,1)}mostrarmensaje(t,e,i){this.snackbar.open(t,e,{duration:2e3,panelClass:[i]})}Publicar(){if(this.textareainput){this.loadingService.loadingPresent({spinner:"circles"}),1===this.idAction&&(this.textareainput="!Informa: "+this.textareainput),2===this.idAction&&(this.textareainput="@Comparte: "+this.textareainput),3===this.idAction&&(this.textareainput="#Reto: "+this.textareainput);const t=new Array;this.photos.length>0&&this.photos.map(e=>{t.push({image:e})}),this.share.guardarpost({user_id:this.usertk.id,post:this.textareainput,medias:t},this.token).subscribe(t=>{this.loadingService.loadingDismiss(),this.share.varPostUpdate.next("update data"),this.router.navigate(["/users/social"])},t=>{this.loadingService.loadingDismiss()})}else this.alertDespuesTiempo()}alertDespuesTiempo(){return Object(s.b)(this,void 0,void 0,(function*(){this.alert=yield this.alertController.create({header:"HEY!",subHeader:"Debes Escribir algo",message:"Dinos que piensas, no puede ir vac\xedo",buttons:["Acepto"]}),yield this.alert.present()}))}volver(){this.actividad="",this.router.navigate(["/users/social"])}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(l.a),r.Vb(a.a),r.Vb(d.a),r.Vb(a.gb),r.Vb(h.a),r.Vb(u.a),r.Vb(g.a),r.Vb(a.b),r.Vb(b.a),r.Vb(c.h),r.Vb(p.a),r.Vb(m.a))},t.\u0275cmp=r.Pb({type:t,selectors:[["app-crear-entrada"]],decls:32,vars:17,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"font-size","30px","color","white",3,"click"],["name","arrow-back-outline"],[1,"tituloInfo","logo"],[2,"color","white"],[1,"oval",3,"ngStyle"],[1,"back"],[4,"ngIf"],["align","center"],["size","2",1,"col-img"],[3,"src"],["size","9"],["fill","clear","rows","4","cols","150","maxlength","150",1,"textArea",3,"ngModel","placeholder","ngModelChange"],["fill","clear",2,"margin","0",3,"ngStyle","click"],["name","cloud-upload",2,"margin-right","5px"],["fill","clear",2,"margin","0",3,"ngStyle","disabled","click"],["name","send",2,"margin-right","5px"],[2,"padding-top","0px"],["style","padding: 0px 30px 0px 60px;",4,"ngIf"],["align","center",1,"title"],[2,"padding","0px 30px 0px 60px"],["style","place-content: flex-end;margin-bottom: 10px;",4,"ngFor","ngForOf"],[2,"place-content","flex-end","margin-bottom","10px"],["name","close-outline",1,"remove-image",3,"click"],[1,"img-content",3,"src"]],template:function(t,e){1&t&&(r.bc(0,"ion-header"),r.bc(1,"ion-toolbar",0),r.bc(2,"ion-buttons",1),r.jc("click",(function(){return e.volver()})),r.Wb(3,"ion-icon",2),r.ac(),r.bc(4,"ion-title",3),r.bc(5,"label",4),r.Qc(6,"MAGIN"),r.ac(),r.ac(),r.ac(),r.ac(),r.bc(7,"ion-content"),r.Wb(8,"div",5),r.bc(9,"div",6),r.Wb(10,"br"),r.Oc(11,f,3,0,"div",7),r.Oc(12,x,3,0,"div",7),r.Oc(13,v,3,0,"div",7),r.Wb(14,"br"),r.Wb(15,"br"),r.bc(16,"ion-row"),r.Wb(17,"div",8),r.ac(),r.bc(18,"ion-row"),r.bc(19,"ion-col",9),r.Wb(20,"img",10),r.ac(),r.bc(21,"ion-col",11),r.bc(22,"textarea",12),r.jc("ngModelChange",(function(t){return e.textareainput=t})),r.ac(),r.bc(23,"ion-button",13),r.jc("click",(function(){return e.selccionImg()})),r.Wb(24,"ion-icon",14),r.Qc(25," Cargar Imagen "),r.ac(),r.bc(26,"ion-button",15),r.jc("click",(function(){return e.Publicar()})),r.Wb(27,"ion-icon",16),r.Qc(28," Compartir "),r.ac(),r.ac(),r.ac(),r.bc(29,"ion-row"),r.bc(30,"ion-col",17),r.Oc(31,y,2,1,"div",18),r.ac(),r.ac(),r.ac(),r.ac()),2&t&&(r.Ib(8),r.uc("ngStyle",r.zc(11,I,e.colors[e.idAction-1])),r.Ib(3),r.uc("ngIf",1==e.idAction),r.Ib(1),r.uc("ngIf",2==e.idAction),r.Ib(1),r.uc("ngIf",3==e.idAction),r.Ib(7),r.wc("src","/assets/social/im",e.idAction,".png",r.Jc),r.Ib(2),r.uc("ngModel",e.textareainput)("placeholder",e.vistaHolder(e.idAction)),r.Ib(1),r.uc("ngStyle",r.zc(13,C,e.colors[e.idAction-1])),r.Ib(3),r.uc("ngStyle",r.zc(15,C,e.colors[e.idAction-1]))("disabled",!e.textareainput),r.Ib(5),r.uc("ngIf",e.photos))},directives:[a.y,a.db,a.k,a.z,a.cb,a.s,n.n,n.m,a.P,a.r,o.c,o.l,o.p,o.s,a.j,n.l],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.textArea[_ngcontent-%COMP%]{width:100%;max-width:500px;height:150px;display:block;resize:none;padding:10px;outline:0;border-radius:10px;border:1px solid #d2d2d2;margin:0 auto;background-color:#fff;text-align:center;color:#000}.title[_ngcontent-%COMP%]{font-size:18px;position:relative;color:#fff}.col-img[_ngcontent-%COMP%]{display:flex;align-items:center}.oval[_ngcontent-%COMP%]{width:100%;height:10%;border-radius:0 0 100px 100px;position:absolute}ion-slides[_ngcontent-%COMP%]{background:rgba(104,103,103,.151);width:50%;height:20%;border-radius:8px}.back[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.555)}  .match-item-action-sheet .action-sheet-group.sc-ion-action-sheet-md{border-top-left-radius:0;border-top-right-radius:0;background-color:#fff}  .match-item-action-sheet .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-icon.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-title.sc-ion-action-sheet-md{color:#000}.img-content[_ngcontent-%COMP%]{border-radius:10px;padding:15px;border:1px solid #e8e8e8;background-color:#e8e8e8;width:100%}  .match-item-action-sheet .action-sheet-group-cancel .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-group-cancel .action-sheet-icon.sc-ion-action-sheet-md{color:#f44336}.remove-image[_ngcontent-%COMP%]{position:absolute;padding:0 1px;margin:20px;font-size:22px;background-color:#ff4b4b;border-radius:10px;color:#fff;font-weight:700}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[c.j.forChild(P)],c.j]}),t})(),j=(()=>{class t{}return t.\u0275mod=r.Tb({type:t}),t.\u0275inj=r.Sb({factory:function(e){return new(e||t)},imports:[[n.c,o.k,a.eb,w]]}),t})()}}]);