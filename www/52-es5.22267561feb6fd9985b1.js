function _classCallCheck(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,i,n){return i&&_defineProperties(e.prototype,i),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{hITH:function(e,i,n){"use strict";n.r(i),n.d(i,"CategoriaPageModule",(function(){return _}));var r=n("ofXK"),t=n("3Pt+"),o=n("TEn/"),a=n("tyNb"),c=n("mrSG"),s=n("fXoL"),l=n("7Vn+"),f=n("8rbx"),d=n("3no8"),u=n("AZGL"),p=n("dNgK"),b=n("h7Fw"),g=n("VnPy"),m=n("1as6");function h(e,i){if(1&e&&(s.bc(0,"div",11),s.bc(1,"ion-label",12),s.Qc(2),s.ac(),s.Wb(3,"br"),s.bc(4,"ion-label",13),s.Qc(5),s.ac(),s.ac()),2&e){var n=s.nc();s.Ib(2),s.Sc("\xa1Hola ",n.usertk.name,"!"),s.Ib(3),s.Sc(" ",n.profileUser," ")}}function v(e,i){1&e&&(s.bc(0,"div",14),s.bc(1,"ion-label",15),s.Qc(2,"Por favor selecciona el perfil deportivo con el que te identificas actualmente"),s.ac(),s.ac())}function k(e,i){if(1&e&&(s.bc(0,"ion-col",26),s.bc(1,"ion-card"),s.bc(2,"div"),s.bc(3,"ion-card-content",27),s.bc(4,"ion-label",28),s.Qc(5),s.oc(6,"capitalize"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&e){var n=i.$implicit,r=s.nc().$implicit;s.Ib(1),s.Lb("card-profiles ",r.value.descriptions,""),s.Ib(4),s.Sc(" ",s.pc(6,4,n.name)," ")}}function x(e,i){if(1&e){var n=s.cc();s.bc(0,"div",16),s.bc(1,"div",17),s.bc(2,"ion-item",18),s.bc(3,"ion-checkbox",19),s.jc("ngModelChange",(function(e){s.Hc(n);var r=i.$implicit;return s.nc().selectProfile(e,r.value.index)})),s.ac(),s.bc(4,"p",20),s.Qc(5),s.ac(),s.ac(),s.ac(),s.bc(6,"div",21),s.bc(7,"ion-grid",22),s.bc(8,"ion-row",23),s.Oc(9,k,7,6,"ion-col",24),s.ac(),s.ac(),s.ac(),s.Wb(10,"hr",25),s.ac()}if(2&e){var r=i.$implicit;s.Ib(2),s.Lb("itemback ",r.value.color,""),s.uc("formGroupName",r.value.index),s.Ib(3),s.Rc(r.value.profile.name),s.Ib(4),s.uc("ngForOf",r.value.profile.descriptions)}}var y,P,C,w=[{path:"",component:(y=function(){function e(i,n,r,t,o,a,c,s,l,f){_classCallCheck(this,e),this.auth=i,this.log=n,this.loadingService=r,this.porfiles=t,this.formBuilder=o,this.alertController=a,this.snackbar=c,this.pObjecto=s,this.router=l,this.share=f,this.colors=["card-1","card-2","card-3"],this.descriptions=["card-descriptions-1","card-descriptions-2","card-descriptions-3"],this.usertk=null,this.profileUser=null,this.profileId=null,this.minProfileSelected=function(e){return e.controls.map((function(e){return e.value.selected})).reduce((function(e,i){return i?e+i:e}),0)>=1?null:{required:!0}}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getToken(),this.loadForm()}},{key:"getToken",value:function(){var e=this;this.auth.gettokenLog().then((function(i){e.token=i,e.loadingService.loadingPresent({spinner:"circles"}),e.log.logdataInfData(i).subscribe((function(i){e.usertk=i,e.profileUser=e.usertk.profile.name,e.profileId=e.usertk.profile.id,e.getProfiles(),e.loadingService.loadingDismiss()}),(function(i){e.loadingService.loadingDismiss()}))}))}},{key:"loadForm",value:function(){this.form=new t.h({profiles:this.formBuilder.array([],{validators:this.minProfileSelected})})}},{key:"getProfiles",value:function(){var e=this;this.loadingService.loadingPresent({message:"Por favor espere",spinner:"circles"}),this.porfiles.getProfiles(this.token).subscribe((function(i){e.loadProfiles(i),e.loadingService.loadingDismiss()}),(function(i){e.loadingService.loadingDismiss()}))}},{key:"loadProfiles",value:function(e){var i=this,n=0;e.data.map((function(e){i.profilesArray.push(i.formBuilder.group({index:new t.f(i.profilesArray.controls.length),profile:new t.f(e),selected:new t.f(e.id==i.profileId),color:new t.f(i.colors[n]),descriptions:new t.f(i.descriptions[n])})),2==n?n=0:n++}))}},{key:"selectProfile",value:function(e,i){e&&this.profilesArray.controls.filter((function(e){return e.get("index").value!==i})).map((function(e){e.get("selected").setValue(!1)}))}},{key:"confirm",value:function(){return Object(c.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var i,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,e.next=3,this.alertController.create({header:"\xa1TEN MUY PRESENTE!",message:"Al cambiar tu perfil actual modificar\xe1 todo tu programa de entrenamiento. \xbfEstas seguro que deseas ajustarlo?",buttons:[{text:"Confirmar",cssClass:"confirm-category",handler:function(){return n.alert.dismiss(!0),!1}},{text:"Cancelar",cssClass:"cancel-category",handler:function(){return n.alert.dismiss(!1),!1}}]});case 3:return this.alert=e.sent,e.next=6,this.alert.present();case 6:return e.next=8,this.alert.onDidDismiss().then((function(e){i.submit(e.data)}));case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"submit",value:function(e){var i=this;if(!0===e){var n=this.profilesArray.controls.find((function(e){return!0===e.get("selected").value}));n&&(n.value.profile.id===this.profileId?this.mostrarmensaje("Debes seleccionar un perfil distinto al actual","Error","red-snackbar"):(this.loadingService.loadingPresent({message:"Por favor espere",spinner:"circles"}),this.porfiles.updateProfile(this.usertk.id,n.value.profile.id,this.token).subscribe((function(e){i.profileUser=n.value.profile.name,i.profileId=n.value.profile.id,i.mostrarmensaje("Tu perfil ha sido ajustado","\xa1Muy bien!","green-snackbar"),i.loadingService.loadingDismiss()}),(function(e){i.loadingService.loadingDismiss()}))))}}},{key:"mostrarmensaje",value:function(e,i,n){this.snackbar.open(e,i,{duration:2e3,panelClass:[n]})}},{key:"back",value:function(){this.share.varProfile.next({id:this.profileId,name:this.profileUser}),this.router.navigate(["/users/perfil"])}},{key:"profilesArray",get:function(){return this.form.get("profiles")}}]),e}(),y.\u0275fac=function(e){return new(e||y)(s.Vb(l.a),s.Vb(f.a),s.Vb(d.a),s.Vb(u.a),s.Vb(t.e),s.Vb(o.b),s.Vb(p.a),s.Vb(b.a),s.Vb(a.h),s.Vb(g.a))},y.\u0275cmp=s.Pb({type:y,selectors:[["app-categoria"]],decls:16,vars:5,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"font-size","30px","color","white",3,"click"],["name","arrow-back-outline"],[1,"tituloInfo","logo"],[2,"color","white"],["style","margin-top: 10px;text-align: center;",4,"ngIf"],["style","text-align: center;margin: 10px",4,"ngIf"],[3,"formGroup"],["formArrayName","profiles","style","margin-bottom: 15px;text-align: -webkit-center;","lines","none",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"buttonCss",3,"disabled","click"],[2,"margin-top","10px","text-align","center"],[2,"font-size","22px","letter-spacing","1px"],[1,"label-profile"],[2,"text-align","center","margin","10px"],[2,"font-size","13px"],["formArrayName","profiles","lines","none",2,"margin-bottom","15px","text-align","-webkit-center"],[2,"text-align","-webkit-center","margin-bottom","2px","padding","0px 25px"],["lines","none",3,"formGroupName"],["slot","end","color","primary","formControlName","selected",3,"ngModelChange"],[2,"text-transform","uppercase","font-weight","bold","margin","0"],[2,"background-color","#a9a9a94d","width","95%","border-radius","10px","margin","10px 0px","padding","5px"],["lines","none"],[2,"align-items","center"],["size","4",4,"ngFor","ngForOf"],[1,"hr-descriptions"],["size","4"],[1,"content-descriptions"],[1,"label-descriptions"]],template:function(e,i){1&e&&(s.bc(0,"ion-header"),s.bc(1,"ion-toolbar",0),s.bc(2,"ion-buttons",1),s.jc("click",(function(){return i.back()})),s.Wb(3,"ion-icon",2),s.ac(),s.bc(4,"ion-title",3),s.bc(5,"label",4),s.Qc(6,"MAGIN"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(7,"ion-content"),s.Oc(8,h,6,2,"div",5),s.Oc(9,v,3,0,"div",6),s.bc(10,"div"),s.bc(11,"form",7),s.Oc(12,x,11,6,"div",8),s.bc(13,"div",9),s.bc(14,"ion-button",10),s.jc("click",(function(){return i.confirm()})),s.Qc(15,"Modificar"),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&e&&(s.Ib(8),s.uc("ngIf",i.usertk),s.Ib(1),s.uc("ngIf",i.profileUser),s.Ib(2),s.uc("formGroup",i.form),s.Ib(1),s.uc("ngForOf",i.profilesArray.controls),s.Ib(2),s.uc("disabled",!i.form.valid))},directives:[o.y,o.db,o.k,o.z,o.cb,o.s,r.m,t.w,t.q,t.i,r.l,o.j,o.F,t.d,o.E,t.j,o.q,o.c,t.p,t.g,o.x,o.P,o.r,o.l,o.m],pipes:[m.a],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.label-profile[_ngcontent-%COMP%]{font-size:17px;font-weight:700;letter-spacing:1px;color:#002a68;text-transform:capitalize}.card-1[_ngcontent-%COMP%]{--background:#002a68}.card-2[_ngcontent-%COMP%]{--background:#80b9f6}.card-3[_ngcontent-%COMP%]{--background:#0041a2}.card-descriptions-1[_ngcontent-%COMP%]{border-left:4px solid #002a68}.card-descriptions-2[_ngcontent-%COMP%]{border-left:4px solid #80b9f6}.card-descriptions-3[_ngcontent-%COMP%]{border-left:4px solid #0041a2}.itemback[_ngcontent-%COMP%]{color:#fff;text-decoration:none;width:95%;border-radius:10px}.content-descriptions[_ngcontent-%COMP%]{padding:5px}.label-descriptions[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.hr-descriptions[_ngcontent-%COMP%]{background-color:#9e9e9e}.card-profiles[_ngcontent-%COMP%]{margin:0;border-left:4px solid #094aa8;border-radius:10px;height:100%}"]}),y)}],I=((P=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:P}),P.\u0275inj=s.Sb({factory:function(e){return new(e||P)},imports:[[a.j.forChild(w)],a.j]}),P),O=n("HsBR"),_=((C=function e(){_classCallCheck(this,e)}).\u0275mod=s.Tb({type:C}),C.\u0275inj=s.Sb({factory:function(e){return new(e||C)},imports:[[r.c,t.k,o.eb,I,t.t,O.a]]}),C)}}]);