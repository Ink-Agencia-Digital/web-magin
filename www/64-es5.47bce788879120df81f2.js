function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"wT+f":function(e,t,n){"use strict";n.r(t),n.d(t,"TimelinePageModule",(function(){return I}));var i=n("ofXK"),c=n("3Pt+"),o=n("TEn/"),a=n("tyNb"),l=n("fXoL"),r=n("7Vn+"),s=n("8rbx"),d=n("VnPy"),g=n("3no8"),p=n("1as6");function m(e,t){if(1&e&&(l.bc(0,"div",22),l.bc(1,"label",23),l.Qc(2),l.oc(3,"slice"),l.ac(),l.bc(4,"label",24),l.Qc(5),l.oc(6,"capitalize"),l.oc(7,"slice"),l.ac(),l.ac()),2&e){var n=l.nc(2).$implicit;l.Ib(2),l.Rc(l.rc(3,2,n.comment,0,10)),l.Ib(3),l.Rc(l.pc(6,6,l.rc(7,8,n.comment,10,n.comment.length)))}}function b(e,t){if(1&e&&(l.bc(0,"div",22),l.bc(1,"label",25),l.Qc(2),l.oc(3,"slice"),l.ac(),l.bc(4,"label"),l.Qc(5),l.oc(6,"capitalize"),l.oc(7,"slice"),l.ac(),l.ac()),2&e){var n=l.nc(2).$implicit;l.Ib(2),l.Rc(l.rc(3,2,n.comment,0,6)),l.Ib(3),l.Rc(l.pc(6,6,l.rc(7,8,n.comment,6,n.comment.length)))}}function f(e,t){if(1&e&&(l.bc(0,"div",22),l.bc(1,"label",26),l.Qc(2),l.oc(3,"slice"),l.ac(),l.bc(4,"label"),l.Qc(5),l.oc(6,"capitalize"),l.oc(7,"slice"),l.ac(),l.ac()),2&e){var n=l.nc(2).$implicit;l.Ib(2),l.Rc(l.rc(3,2,n.comment,0,9)),l.Ib(3),l.Rc(l.pc(6,6,l.rc(7,8,n.comment,9,n.comment.length)))}}var u=function(e,t,n){return{"content-challenge":e,"content-inform":t,"content-share":n}};function h(e,t){if(1&e&&(l.bc(0,"li",15),l.bc(1,"div",16),l.bc(2,"div",17),l.Wb(3,"ion-icon",18),l.ac(),l.ac(),l.bc(4,"div",19),l.Qc(5),l.oc(6,"date"),l.ac(),l.bc(7,"div",20),l.Oc(8,m,8,12,"div",21),l.Oc(9,b,8,12,"div",21),l.Oc(10,f,8,12,"div",21),l.ac(),l.ac()),2&e){var n=l.nc().$implicit;l.Ib(4),l.uc("ngClass",l.Bc(8,u,"#"==n.comment[0],"!"==n.comment[0],"@"==n.comment[0])),l.Ib(1),l.Sc(" ",l.qc(6,5,n.date,"short")," "),l.Ib(3),l.uc("ngIf","@"==n.comment[0]),l.Ib(1),l.uc("ngIf","#"==n.comment[0]),l.Ib(1),l.uc("ngIf","!"==n.comment[0])}}function _(e,t){if(1&e&&(l.bc(0,"li",15),l.bc(1,"div",16),l.bc(2,"div",17),l.Wb(3,"ion-icon",27),l.ac(),l.ac(),l.bc(4,"div",28),l.Qc(5),l.oc(6,"date"),l.ac(),l.bc(7,"div",20),l.bc(8,"div",22),l.bc(9,"label",29),l.Qc(10),l.oc(11,"capitalize"),l.ac(),l.ac(),l.ac(),l.ac()),2&e){var n=l.nc().$implicit;l.Ib(5),l.Sc(" ",l.qc(6,2,n.date,"short")," "),l.Ib(5),l.Rc(l.pc(11,5,n.comment))}}function x(e,t){if(1&e&&(l.bc(0,"div"),l.Oc(1,h,11,12,"li",14),l.Oc(2,_,12,7,"li",14),l.ac()),2&e){var n=t.$implicit;l.Ib(1),l.uc("ngIf",1===n.type),l.Ib(1),l.uc("ngIf",2===n.type)}}function v(e,t){if(1&e&&(l.bc(0,"div"),l.bc(1,"ul",12),l.Oc(2,x,3,2,"div",13),l.ac(),l.ac()),2&e){var n=l.nc();l.Ib(2),l.uc("ngForOf",n.timeline)}}function P(e,t){1&e&&(l.bc(0,"div",30),l.bc(1,"ion-badge",31),l.Qc(2,"No existen datos para el timeline"),l.ac(),l.ac())}var C,O,k,M=[{path:"",component:(C=function(){function e(t,n,i,c){_classCallCheck(this,e),this.auth=t,this.log=n,this.share=i,this.loadingService=c,this.infoTimeline=[],this.miactividad=[],this.feelings=[],this.timeline=[],this.usertk=null,this.getToken()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.loadingService.loadingPresent({spinner:"circles"}),this.auth.gettokenLog().then((function(t){e.log.logdataInfData(t).subscribe((function(t){e.currentUser=t.name+" "+t.lastname,e.share.getTimeline(t.id,e.token).subscribe((function(n){e.loadingService.loadingDismiss(),e.infoTimeline=n.data,e.paginaActualPosts=n.meta.current_page,e.ultimaPagePosts=n.meta.last_page,e.totalDtPosts=n.meta.total,e.usertk=t,e.getMiactividad(e.usertk.id)}),(function(t){e.loadingService.loadingDismiss()}))}),(function(t){e.loadingService.loadingDismiss()}))}))}},{key:"getToken",value:function(){var e=this;this.auth.gettokenLog().then((function(t){e.token=t}))}},{key:"getMiactividad",value:function(e){var t=this;this.share.getActividadUsuario(e,this.token).subscribe((function(n){t.miactividad=n.data,t.paginaActualPosts=n.meta.current_page,t.ultimaPagePosts=n.meta.last_page,t.totalDtPosts=n.meta.total,t.getFeelings(e)}))}},{key:"getFeelings",value:function(e){var t=this;this.share.getFeeling(e,this.token).subscribe((function(e){t.feelings=e.data,t.paginaActualFeelings=e.meta.current_page,t.ultimaPageFeelings=e.meta.last_page,t.totalDtFeelings=e.meta.total,t.organizeData()}))}},{key:"organizeData",value:function(){var e=this;this.miactividad.map((function(t){e.timeline.push({type:1,comment:t.post,date:t.created_at})})),this.feelings.map((function(t){e.timeline.push({type:2,comment:t.name,date:t.created_at})})),this.organizeTimelline()}},{key:"organizeTimelline",value:function(){this.timeline=this.timeline.sort((function(e,t){return 0-(new Date(e.date).getTime()<new Date(t.date).getTime()?-1:1)}))}},{key:"loadData",value:function(e){var t=this;this.paginaActualPosts=this.paginaActualPosts+1,this.paginaActualFeelings=this.paginaActualFeelings+1,setTimeout((function(){if(t.infoTimeline.length>=t.totalDtPosts)return e.target.complete(),void(t.infonitescroll.disabled=!0);t.share.getNextActividadUsuario(t.usertk.id,t.token,t.paginaActualPosts).subscribe((function(n){n.data.forEach((function(e){t.timeline.push({type:1,comment:e.post,date:e.created_at})})),t.organizeTimelline(),e.target.complete()})),t.share.getFeelingNextPage(t.usertk.id,t.paginaActualFeelings,t.token).subscribe((function(n){n.data.forEach((function(e){t.timeline.push({type:2,comment:e.name,date:e.created_at})})),t.organizeTimelline(),e.target.complete()}))}),2500)}}]),e}(),C.\u0275fac=function(e){return new(e||C)(l.Vb(r.a),l.Vb(s.a),l.Vb(d.a),l.Vb(g.a))},C.\u0275cmp=l.Pb({type:C,selectors:[["app-timeline"]],viewQuery:function(e,t){var n;1&e&&l.Wc(o.B,!0),2&e&&l.Dc(n=l.kc())&&(t.infonitescroll=n.first)},decls:17,vars:2,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"color","white"],["defaultHref","/users/perfil"],[1,"tituloInfo","logo"],[2,"color","white"],[2,"color","black"],[2,"margin-top","10px","text-align","center"],[1,"title"],[4,"ngIf"],["style","text-align: center;margin-top: 15px;",4,"ngIf"],["threshold","10%","position","center",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando..."],[1,"timeline"],[4,"ngFor","ngForOf"],["class","timeline__item",4,"ngIf"],[1,"timeline__item"],[1,"timeline__step"],[1,"timeline__step__marker","timeline__step__marker--red"],["name","chatbox-outline",2,"width","30px","height","46px","color","white","margin-bottom","-8px"],[1,"timeline__time",3,"ngClass"],[1,"timeline__content"],["class","timeline__title content-timeline",4,"ngIf"],[1,"timeline__title","content-timeline"],[1,"content","label-share"],[1,""],[1,"content","label-challenge"],[1,"content","label-inform"],["name","heart-circle-outline",2,"width","30px","height","46px","color","white","margin-bottom","-8px"],[1,"timeline__time","content-feeling"],[1,"label-feeling"],[2,"text-align","center","margin-top","15px"],["color","warning"]],template:function(e,t){1&e&&(l.bc(0,"ion-header"),l.bc(1,"ion-toolbar",0),l.bc(2,"ion-buttons",1),l.Wb(3,"ion-back-button",2),l.ac(),l.bc(4,"ion-title",3),l.bc(5,"label",4),l.Qc(6,"MAGIN"),l.ac(),l.ac(),l.ac(),l.ac(),l.bc(7,"ion-content"),l.bc(8,"div"),l.bc(9,"div",5),l.bc(10,"div",6),l.bc(11,"ion-badge",7),l.Qc(12,"Mi linea de tiempo"),l.ac(),l.ac(),l.Oc(13,v,3,1,"div",8),l.Oc(14,P,3,0,"div",9),l.ac(),l.bc(15,"ion-infinite-scroll",10),l.jc("ionInfinite",(function(e){return t.loadData(e)})),l.Wb(16,"ion-infinite-scroll-content",11),l.ac(),l.ac(),l.ac()),2&e&&(l.Ib(13),l.uc("ngIf",t.timeline.length>0),l.Ib(1),l.uc("ngIf",0===t.timeline.length))},directives:[o.y,o.db,o.k,o.g,o.h,o.cb,o.s,o.i,i.m,o.B,o.C,i.l,o.z,i.k],pipes:[i.f,i.u,p.a],styles:['*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.timeline[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:0 22px;margin:0;list-style:none}.timeline[_ngcontent-%COMP%]:before{position:fixed;top:0;height:100%;padding-right:8px;border-right:2px solid #c3c3c3;content:""}.timeline__item[_ngcontent-%COMP%]{display:flex;align-items:stretch;padding:8px 0;text-align:center}.timeline__step[_ngcontent-%COMP%]{padding-right:8px}.timeline__step__marker[_ngcontent-%COMP%]{position:relative;display:table-cell;height:24px;min-height:24px;width:24px;min-width:24px;border:4px solid #f2f2f2;border-radius:50%;background-color:#fff;z-index:0}.timeline__step__marker--blue[_ngcontent-%COMP%], .timeline__step__marker--red[_ngcontent-%COMP%]{border-color:#002a68;background-color:#002a68}.timeline__time[_ngcontent-%COMP%]{padding-right:6px;font-size:10px}.timeline__title[_ngcontent-%COMP%]{padding-bottom:6px;font-size:32px;text-align:center}.timeline__points[_ngcontent-%COMP%]{padding:0;list-style:none;font-size:24px;color:#77777d}.timeline__points[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:0 0 12px}@media (max-width:768px){.card[_ngcontent-%COMP%]{max-width:375}.timeline[_ngcontent-%COMP%]{padding:0 15px}.timeline[_ngcontent-%COMP%]:before{padding-right:23px}.timeline__item[_ngcontent-%COMP%]{padding:25px 0}.timeline__step[_ngcontent-%COMP%]{padding-right:15px}.timeline__step__marker[_ngcontent-%COMP%]{min-width:50px;border-width:2px}.timeline__time[_ngcontent-%COMP%]{padding-right:72px;font-size:13px}.timeline__title[_ngcontent-%COMP%]{padding-bottom:14.85714px;font-size:15px}.timeline__points[_ngcontent-%COMP%]{font-size:13.71429px}.timeline__points[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding-bottom:6.85714px}}html[_ngcontent-%COMP%]{background:url(//s3-us-west-2.amazonaws.com/s.cdpn.io/153256/trees.jpg) no-repeat 50% fixed;background-size:cover}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{line-height:1.5rem;font-family:Muli,sans-serif;font-weight:300;margin:0;box-sizing:border-box;height:100%}.card[_ngcontent-%COMP%]{background-color:#fff;max-width:750px;margin:0 auto;height:100%;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);display:table}.title[_ngcontent-%COMP%]{background-color:#002a68;font-size:18px;padding:5px 10px;border-radius:5px}.content-share[_ngcontent-%COMP%]{border-left:4px solid #3880ff!important;border:1px solid #dedede;border-radius:10px}.content-inform[_ngcontent-%COMP%], .content-share[_ngcontent-%COMP%]{padding:10px;width:135px;align-self:center}.content-inform[_ngcontent-%COMP%]{border-left:4px solid #3dc2ff!important;border:1px solid #dedede;border-radius:10px}.content-challenge[_ngcontent-%COMP%]{border-left:4px solid #eb445a!important;border:1px solid #dedede;border-radius:10px;padding:10px;width:135px;align-self:center}.label-share[_ngcontent-%COMP%]{background-color:#3880ff!important}.label-inform[_ngcontent-%COMP%]{background-color:#3dc2ff!important}.label-challenge[_ngcontent-%COMP%]{background-color:#eb445a!important}.content-timeline[_ngcontent-%COMP%]{border:1px solid #eaeaea;margin-left:10px;padding:10px;border-radius:10px;width:150px}.content[_ngcontent-%COMP%]{color:#fff;padding:3px 5px;margin-right:4px;border-radius:5px;font-weight:700;font-size:13px}.content-feeling[_ngcontent-%COMP%]{border-left:4px solid #ffc107!important;border:1px solid #dedede;border-radius:10px;padding:10px;width:135px;align-self:center}.label-feeling[_ngcontent-%COMP%]{background-color:#ffc107;padding:4px 10px;color:#000;border-radius:5px;font-weight:700}']}),C)}],w=((O=function e(){_classCallCheck(this,e)}).\u0275mod=l.Tb({type:O}),O.\u0275inj=l.Sb({factory:function(e){return new(e||O)},imports:[[a.j.forChild(M)],a.j]}),O),y=n("HsBR"),I=((k=function e(){_classCallCheck(this,e)}).\u0275mod=l.Tb({type:k}),k.\u0275inj=l.Sb({factory:function(e){return new(e||k)},imports:[[i.c,c.k,o.eb,w,y.a]]}),k)}}]);