function _classCallCheck(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function _createClass(o,e,n){return e&&_defineProperties(o.prototype,e),n&&_defineProperties(o,n),o}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{vyRW:function(o,e,n){"use strict";n.r(e),n.d(e,"ChangePasswordPageModule",(function(){return C}));var t=n("ofXK"),r=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),i=n("mrSG"),c=n("fXoL"),l=n("7Vn+"),d=n("8rbx"),f=n("dNgK"),u=n("3no8"),m=n("VnPy");function b(o,e){if(1&o&&(c.bc(0,"ion-label",23),c.Qc(1),c.ac()),2&o){var n=c.nc();c.Ib(1),c.Rc(n.message_header)}}function p(o,e){if(1&o&&(c.bc(0,"ion-label",24),c.Qc(1),c.ac()),2&o){var n=c.nc();c.Ib(1),c.Rc(n.usertk.name)}}function h(o,e){1&o&&(c.bc(0,"ion-item",25),c.bc(1,"ion-label",26),c.Qc(2,"La Contrase\xf1a debe tener: "),c.Wb(3,"br"),c.Qc(4,"1 numero "),c.Wb(5,"br"),c.Qc(6," 1 letra Mayuscula "),c.Wb(7,"br"),c.Qc(8," 1 letra minuscula "),c.Wb(9,"br"),c.Qc(10," y 8 o m\xe1s caracteres"),c.ac(),c.ac())}function g(o,e){1&o&&(c.bc(0,"ion-item",25),c.bc(1,"ion-label",27),c.Qc(2,"Las contrase\xf1as no coinciden"),c.ac(),c.ac())}var w,v,k,x=[{path:"",component:(w=function(){function o(e,n,t,r,a,s){_classCallCheck(this,o),this.auth=e,this.log=n,this.snackbar=t,this.loadingService=r,this.sharedService=a,this.route=s,this.submitted=!1,this.passwordPattern=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/,this.showpassword=!1,this.passwordToggleIcon="eye",this.showpasswordConfirm=!1,this.passwordToggleIconConfirm="eye",this.usertk=null}return _createClass(o,[{key:"ngOnInit",value:function(){this.getDataInfo(),this.getCurrentHour(),this.loadForm()}},{key:"getDataInfo",value:function(){var o=this;this.auth.gettokenLog().then((function(e){o.log.logdataInfData(e).subscribe((function(e){o.usertk=e}))}))}},{key:"loadForm",value:function(){this.form=new r.h({password:new r.f("",[r.v.required,r.v.minLength(8),r.v.maxLength(12),r.v.pattern(this.passwordPattern)]),password_confirmation:new r.f("",[r.v.required])},{validators:this.matchingPasswords("password","password_confirmation")})}},{key:"matchingPasswords",value:function(o,e){return function(n){if(n.controls[o].value!==n.controls[e].value)return{mismatchedPasswords:!0}}}},{key:"changePassword",value:function(){var o=this;if(!this.form.valid&&this.usertk.id)return this.mostrarmensaje("Los datos ingresados no son validos","Error","red-snackbar"),!1;var e=this.form.value.password,n=this.form.value.password_confirmation;this.loadingService.loadingPresent({spinner:"circles"}),this.sharedService.resetPassword(this.usertk.id,e,n).subscribe((function(e){return Object(i.b)(o,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e?(this.loadingService.loadingDismiss(),this.mostrarmensaje("La contrase\xf1a se ha cambiado exitosamente","OK","green-snackbar"),this.loadForm(),this.route.navigateByUrl(null===this.usertk.profile_id?"/slides":"/users/home")):(this.loadingService.loadingDismiss(),this.mostrarmensaje("El email no se encuentra registrado en el sistema","Error","red-snackbar"));case 1:case"end":return o.stop()}}),o,this)})))}),(function(e){o.loadingService.loadingDismiss(),o.mostrarmensaje("Error restableciendo la contrase\xf1a","Error","red-snackbar"),o.auth.logout()}))}},{key:"showpass",value:function(){this.showpassword=!this.showpassword,this.passwordToggleIcon="eye"===this.passwordToggleIcon?"eye-off":"eye"}},{key:"showpassConfirm",value:function(){this.showpasswordConfirm=!this.showpasswordConfirm,this.passwordToggleIconConfirm="eye"===this.passwordToggleIconConfirm?"eye-off":"eye"}},{key:"getCurrentHour",value:function(){var o=(new Date).getHours();this.message_header=o<12?"Buenos d\xedas":o<18?"Buenas tardes":"Buenas noches"}},{key:"mostrarmensaje",value:function(o,e,n){this.snackbar.open(o,e,{duration:2e3,panelClass:[n]})}}]),o}(),w.\u0275fac=function(o){return new(o||w)(c.Vb(l.a),c.Vb(d.a),c.Vb(f.a),c.Vb(u.a),c.Vb(m.a),c.Vb(s.h))},w.\u0275cmp=c.Pb({type:w,selectors:[["app-change-password"]],decls:33,vars:10,consts:[["header",""],[1,"ion-toolbar-ccs"],["toolbar",""],[1,"logo"],["size","4"],[1,"icon-header"],["src","/assets/finallogo.png","width","120","height","70"],["size","8",2,"align-self","flex-end"],[1,"info-header"],["style","font-size: 14px;color: #fff;margin-right: 5px;",4,"ngIf"],["style","font-size: 14px;color: #fff;text-transform: capitalize;",4,"ngIf"],[1,"ion-content-login"],[1,"container-password"],[1,"title-css"],[1,"mt-20"],[1,"mt-30"],[3,"formGroup"],[1,"item-form"],["name","contrasena","placeholder","Contrase\xf1a","formControlName","password",3,"type"],["slot","end",3,"name","click"],["class","form-text-error",4,"ngIf"],["placeholder","Confirmar Contrase\xf1a","formControlName","password_confirmation","show-password","",3,"type"],["type","submit","expand","block",1,"button-css",3,"disabled","click"],[2,"font-size","14px","color","#fff","margin-right","5px"],[2,"font-size","14px","color","#fff","text-transform","capitalize"],[1,"form-text-error"],[1,"l-error"],["no-margin","","stacked","",1,"l-error"]],template:function(o,e){1&o&&(c.bc(0,"ion-header",null,0),c.bc(2,"ion-toolbar",1,2),c.bc(4,"div"),c.bc(5,"ion-toolbar"),c.bc(6,"ion-row",3),c.bc(7,"ion-col",4),c.bc(8,"div",5),c.Wb(9,"img",6),c.ac(),c.ac(),c.bc(10,"ion-col",7),c.bc(11,"div",8),c.Oc(12,b,2,1,"ion-label",9),c.Oc(13,p,2,1,"ion-label",10),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(14,"ion-content",11),c.bc(15,"div",12),c.bc(16,"ion-card-title",13),c.Qc(17,"Cambio de contrase\xf1a"),c.ac(),c.bc(18,"ion-card-subtitle",14),c.Qc(19,"Hemos detectado que tu contrase\xf1a fue generada automaticamente. Por favor cambia la contrase\xf1a para continuar"),c.ac(),c.bc(20,"div",15),c.bc(21,"form",16),c.bc(22,"ion-item",17),c.Wb(23,"ion-input",18),c.bc(24,"ion-icon",19),c.jc("click",(function(){return e.showpass()})),c.ac(),c.ac(),c.Oc(25,h,11,0,"ion-item",20),c.bc(26,"ion-item",17),c.Wb(27,"ion-input",21),c.bc(28,"ion-icon",19),c.jc("click",(function(){return e.showpassConfirm()})),c.ac(),c.ac(),c.Oc(29,g,3,0,"ion-item",20),c.bc(30,"div"),c.bc(31,"ion-button",22),c.jc("click",(function(){return e.changePassword()})),c.Qc(32,"Cambiar contrase\xf1a"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&o&&(c.Ib(12),c.uc("ngIf",e.usertk),c.Ib(1),c.uc("ngIf",e.usertk),c.Ib(8),c.uc("formGroup",e.form),c.Ib(2),c.uc("type",e.showpassword?"text":"password"),c.Ib(1),c.uc("name",e.passwordToggleIcon),c.Ib(1),c.uc("ngIf",!e.form.controls.password.valid&&(e.form.controls.password.touched||e.form.controls.password.dirty)),c.Ib(2),c.uc("type",e.showpasswordConfirm?"text":"password"),c.Ib(1),c.uc("name",e.passwordToggleIconConfirm),c.Ib(1),c.uc("ngIf",e.form.controls.password_confirmation.touched&&e.form.hasError("mismatchedPasswords")&&e.form.controls.password.valid),c.Ib(2),c.uc("disabled",!e.form.valid))},directives:[a.y,a.db,a.P,a.r,t.m,a.s,a.p,a.o,r.w,r.q,r.i,a.E,a.D,a.pb,r.p,r.g,a.z,a.j,a.F],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.container-password[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.item-form[_ngcontent-%COMP%]{background-color:hsla(0,0%,96.5%,.4745098039215686);border:none;font-size:11px;color:#000;font-size:13px;width:85%;height:45px;margin:0 auto 10px;border-radius:8px;--background:rgba(252,250,250,0.541)!important}.button-css[_ngcontent-%COMP%], .item-form[_ngcontent-%COMP%]{letter-spacing:1px;text-decoration:none;transition:all .3s ease-in-out;text-align:center}.button-css[_ngcontent-%COMP%]{box-shadow:0 10px 30px 0 rgba(95,186,233,.4);font-size:11px;margin:10px 0 0;border:none;display:inline-block;text-transform:uppercase;width:82%;height:35px;color:#fff;--background:#002a68!important}.form-text-error[_ngcontent-%COMP%]{font-size:11px;letter-spacing:1px;color:#721c24;background:#f5c6cb;border-color:#f5c6cb;font-size:smaller;transition:all .3s ease-in-out;text-decoration:none;margin:0 auto 10px;width:85%;border-radius:8px}.l-error[_ngcontent-%COMP%]{color:#f44336;font-weight:500}"]}),w)}],y=((k=function o(){_classCallCheck(this,o)}).\u0275mod=c.Tb({type:k}),k.\u0275inj=c.Sb({factory:function(o){return new(o||k)},imports:[[s.j.forChild(x)],s.j]}),k),C=((v=function o(){_classCallCheck(this,o)}).\u0275mod=c.Tb({type:v}),v.\u0275inj=c.Sb({factory:function(o){return new(o||v)},imports:[[t.c,r.t,a.eb,y]]}),v)}}]);