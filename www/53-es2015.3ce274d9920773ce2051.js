(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{xlje:function(e,t,i){"use strict";i.r(t),i.d(t,"CompetenciaPageModule",(function(){return F}));var o=i("ofXK"),n=i("3Pt+"),c=i("TEn/"),a=i("tyNb"),s=i("mrSG"),r=i("AytR"),d=i("fXoL"),l=i("h7Fw"),h=i("7Vn+"),g=i("8rbx"),p=i("tAfe"),u=i("dNgK"),b=i("a/9d"),m=i("eHpL"),f=i("FAH8"),v=i("3no8"),x=i("VnPy"),k=i("Ut7A");const P=["videoCompetence"];function y(e,t){1&e&&(d.bc(0,"div"),d.bc(1,"div",32),d.Qc(2," DEPORTIVO "),d.ac(),d.ac())}function w(e,t){1&e&&(d.bc(0,"div"),d.bc(1,"div",32),d.Qc(2," ACAD\xc9MICO "),d.ac(),d.ac())}function O(e,t){if(1&e&&(d.bc(0,"ion-col",33),d.Wb(1,"img",34),d.ac()),2&e){const e=d.nc();d.Ib(1),d.wc("src","../../../assets/avatar/",e.usertk.avatar,".png",d.Jc)}}function I(e,t){if(1&e){const e=d.cc();d.bc(0,"ion-row",37),d.bc(1,"ion-icon",38),d.jc("click",(function(){d.Hc(e);const i=t.$implicit;return d.nc(2).removeImagen(i)})),d.ac(),d.Wb(2,"img",39),d.ac()}if(2&e){const e=t.$implicit;d.Ib(2),d.uc("src",e,d.Jc)}}function C(e,t){if(1&e&&(d.bc(0,"div",35),d.Oc(1,I,3,1,"ion-row",36),d.ac()),2&e){const e=d.nc();d.Ib(1),d.uc("ngForOf",e.photos)}}function j(e,t){if(1&e){const e=d.cc();d.bc(0,"div",35),d.bc(1,"ion-row",37),d.bc(2,"ion-icon",40),d.jc("click",(function(){return d.Hc(e),d.nc().removeVideo()})),d.ac(),d.Wb(3,"video",41,42),d.ac(),d.ac()}}function V(e,t){if(1&e){const e=d.cc();d.bc(0,"img",49),d.jc("click",(function(){d.Hc(e);const t=d.nc(2).$implicit;return d.nc().seePublication(t)})),d.ac()}if(2&e){const e=d.nc(2).$implicit,t=d.nc();d.xc("src","",t.basePath,"medias/",e.medias[0].media,"",d.Jc)}}function A(e,t){if(1&e){const e=d.cc();d.bc(0,"video",50),d.jc("click",(function(){d.Hc(e);const t=d.nc(2).$implicit;return d.nc().seePublication(t)})),d.ac()}if(2&e){const e=d.nc(2).$implicit,t=d.nc();d.xc("src","",t.basePath,"medias/",e.medias[0].media,"",d.Jc),d.uc("muted","muted")}}function M(e,t){if(1&e&&(d.bc(0,"ion-card",46),d.Oc(1,V,1,2,"img",47),d.Oc(2,A,1,3,"video",48),d.ac()),2&e){const e=d.nc().$implicit;d.Ib(1),d.uc("ngIf",1===e.medias[0].type),d.Ib(1),d.uc("ngIf",2===e.medias[0].type)}}function D(e,t){if(1&e&&(d.bc(0,"ion-col",43),d.bc(1,"div",44),d.Oc(2,M,3,2,"ion-card",45),d.ac(),d.ac()),2&e){const e=t.$implicit;d.Ib(2),d.uc("ngIf",0!==e.medias.length)}}function T(e,t){1&e&&(d.bc(0,"div",51),d.bc(1,"ion-badge",52),d.Qc(2,"No existen publicaciones"),d.ac(),d.ac())}const S=function(e){return{background:e}},_=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,c,a,s,d,l,h,g,p,u,b){this.pObjecto=e,this.router=t,this.auth=i,this.log=o,this.actionSheetcontroller=n,this.imagePick=c,this.snackbar=a,this.camara=s,this.loadingCtrl=d,this.webview=l,this.file=h,this.alertController=g,this.loadingService=p,this.share=u,this.changeDetectorRef=b,this.colors=["#ff9800","#4caf50"],this.usertk=null,this.photos=new Array,this.posts=new Array,this.basePath=""+r.a.HOST,this.url=null,this.getToken()}ngOnInit(){this.getInformation(),this.share.varPostUpdate.subscribe(e=>{this.infonitescroll.disabled=!1,this.getPosts()})}getInformation(){const e=this.pObjecto.getNavData();this.idAction=e.idAction}placeholder(e){return 1===e||2===e?"Detalla mas informaci\xf3n":void 0}getToken(){this.loadingService.loadingPresent({spinner:"circles"}),this.auth.gettokenLog().then(e=>{this.token=e,this.log.logdataInfData(e).subscribe(e=>{this.usertk=e,this.getPosts(),this.loadingService.loadingDismiss()},e=>{this.loadingService.loadingDismiss()})})}getPosts(){this.loadingService.loadingPresent({spinner:"circles"}),this.share.getPostCompetence(this.token,this.usertk.id).subscribe(e=>{this.posts=e.data.filter(e=>e.type===this.idAction),this.actualPage=e.meta.current_page,this.lastPage=e.meta.first_page,this.totalDt=e.meta.total,this.loadingService.loadingDismiss()})}seePublication(e){return Object(s.b)(this,void 0,void 0,(function*(){this.pObjecto.setData({publication:e}),this.router.navigate(["/users/perfil/publicacion"])}))}selectImg(){return Object(s.b)(this,void 0,void 0,(function*(){const e=yield this.actionSheetcontroller.create({header:"Seleccione una imagen",cssClass:"match-item-action-sheet",buttons:[{text:"Galer\xeda",icon:"image-outline",handler:()=>{this.usarGaleria()}},{text:"C\xe1mara",icon:"camera-outline",handler:()=>{this.usarCamara()}},{text:"Cancelar",icon:"close-outline",role:"cancel"}]});yield e.present()}))}usarGaleria(){this.photos.length<5?this.imagePick.hasReadPermission().then(e=>{0==e?this.imagePick.requestReadPermission():1==e&&this.imagePick.getPictures({maximumImagesCount:5-this.photos.length,quality:100,outputType:1}).then(e=>{for(var t=0;t<e.length;t++)this.photos.push("data:image/jpeg;base64,"+e[t])}).catch(e=>{this.mostrarmensaje("Se presento un error al cargar las im\xe1genes, por favor comun\xedquese con el administrador.","Error","red-snackbar")})}):this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar")}usarCamara(){return Object(s.b)(this,void 0,void 0,(function*(){if(this.photos.length<5){const e={quality:100,correctOrientation:!0,destinationType:this.camara.DestinationType.DATA_URL,encodingType:this.camara.EncodingType.JPEG,mediaType:this.camara.MediaType.PICTURE};yield this.camara.getPicture(e).then(e=>{this.photos.push("data:image/jpeg;base64,"+e)}).catch(e=>{"No Image Selected"==e&&this.mostrarmensaje("No se seleccion\xf3 ninguna imagen","Error","red-snackbar")})}else this.mostrarmensaje("El m\xe1ximo de im\xe1genes adjuntas es de 5","Error","red-snackbar")}))}loadVideo(){const e=this;this.camara.getPicture({mediaType:this.camara.MediaType.VIDEO,sourceType:this.camara.PictureSourceType.PHOTOLIBRARY}).then(t=>Object(s.b)(this,void 0,void 0,(function*(){if(t){this.showLoader(),this.url=this.webview.convertFileSrc(t),this.changeDetectorRef.detectChanges();let r=e.videoCompetence.nativeElement;r.src=this.url,r.play(),this.uploadedVideo=null;var i=t.substr(t.lastIndexOf("/")+1),o=t.substr(0,t.lastIndexOf("/")+1);o=o.includes("file://")?o:"file://"+o;try{var n=yield this.file.resolveDirectoryUrl(o),c=yield this.file.getFile(n,i,{})}catch(a){return e.removeVideo(),this.dismissLoader(),this.presentAlert("Error","Ha ocurrido un error")}c.file(t=>{if(this.dismissLoader(),t.size>20971520)return e.removeVideo(),this.presentAlert("Error","No puedes subir m\xe1s de 20MB.");if("video/mp4"!==t.type)return e.removeVideo(),this.presentAlert("Error","Tipo de archivo incorrecto.");this.selectedVideo=c.nativeURL;let i=new FileReader;i.readAsDataURL(t),i.onloadend=e=>Object(s.b)(this,void 0,void 0,(function*(){let t=e.target.result.split(",")[1],i=atob(t),o=btoa(i);this.videBase64="data:video/mp4;base64,"+o})),i.onerror=function(t){e.removeVideo(),e.mostrarmensaje("Ha ocurrido un error","Error","red-snackbar")}})}})),t=>{e.removeVideo(),e.mostrarmensaje("Ha ocurrido un error","Error","red-snackbar")})}removeImagen(e){const t=this.photos.findIndex(t=>t===e);t>=0&&this.photos.splice(t,1)}removeVideo(){this.url=null,this.selectedVideo=null,this.videBase64=null}post(){if(this.message&&(this.photos.length>0||this.url)){this.loadingService.loadingPresent({spinner:"circles"});const e=new Array;this.photos.length>0&&this.photos.map(t=>{e.push({image:t})});const t=new Array;this.videBase64&&t.push({video:this.videBase64}),this.share.savePostCompetence({user_id:this.usertk.id,comment:this.message,images:e,videos:t,type:this.idAction},this.token).subscribe(e=>{this.message=null,this.photos=new Array,this.removeVideo(),this.loadingService.loadingDismiss(),this.share.varPostUpdate.next("update data")},e=>{this.loadingService.loadingDismiss()})}else this.alertDespuesTiempo()}loadData(e){this.actualPage=this.actualPage+1,setTimeout(()=>{if(this.posts.length>=this.totalDt)return e.target.complete(),void(this.infonitescroll.disabled=!0);this.share.getPostCompetenceNextPage(this.actualPage,this.token,this.usertk.id).subscribe(t=>{t.data.filter(e=>e.type===this.idAction).map(e=>{this.posts.push(e)}),e.target.complete()})},5e3)}alertDespuesTiempo(){return Object(s.b)(this,void 0,void 0,(function*(){this.alert=yield this.alertController.create({header:"HEY!",subHeader:"Cu\xe9ntanos que piensas",message:"Debes escribir algo y publicar una imagen o un video",buttons:["Acepto"]}),yield this.alert.present()}))}presentAlert(e,t){return Object(s.b)(this,void 0,void 0,(function*(){this.removeVideo(),(yield this.alertController.create({header:e,subHeader:t,buttons:["Cerrar"]})).present()}))}dismissLoader(){this.loading.dismiss()}showLoader(){return Object(s.b)(this,void 0,void 0,(function*(){return this.loading=yield this.loadingCtrl.create({message:"Cargando Datos..."}),this.loading.present()}))}back(){this.router.navigate(["/users/perfil"])}mostrarmensaje(e,t,i){this.snackbar.open(e,t,{duration:2e3,panelClass:[i]})}}return e.\u0275fac=function(t){return new(t||e)(d.Vb(l.a),d.Vb(a.h),d.Vb(h.a),d.Vb(g.a),d.Vb(c.a),d.Vb(p.a),d.Vb(u.a),d.Vb(b.a),d.Vb(c.gb),d.Vb(m.a),d.Vb(f.a),d.Vb(c.b),d.Vb(v.a),d.Vb(x.a),d.Vb(d.h))},e.\u0275cmp=d.Pb({type:e,selectors:[["app-competencia"]],viewQuery:function(e,t){var i;1&e&&(d.Wc(c.B,!0),d.Wc(P,!0)),2&e&&(d.Dc(i=d.kc())&&(t.infonitescroll=i.first),d.Dc(i=d.kc())&&(t.videoCompetence=i.first))},decls:50,vars:15,consts:[["header",""],[1,"ion-toolbar-ccs"],["slot","start",2,"font-size","30px","color","white",3,"click"],["name","arrow-back-outline"],[1,"tituloInfo","logo"],[2,"color","white"],[2,"--background","#f4f4f4",3,"fullscreen","appHideHeader","scrollEvents"],[1,"oval",3,"ngStyle"],[2,"margin-top","15px"],[4,"ngIf"],[2,"border-radius","10px","padding","10px"],["size","2","class","col-img",4,"ngIf"],["size","10"],["fill","clear","rows","4","cols","150",1,"input-message",2,"background","white",3,"ngModel","placeholder","ngModelChange"],["size","6",2,"text-align","-webkit-center"],[1,"card-buttons",3,"click"],["src","/assets/camera.png",2,"width","20px"],[1,"label-buttons"],["src","/assets/video.png",2,"width","20px"],["size","12",2,"text-align","-webkit-center"],[1,"card-buttons",2,"background","#002a68","height","50px","padding","5px",3,"click"],["src","/assets/send.png",2,"width","20px"],[2,"color","white","font-size","15px","font-weight","500"],[2,"padding-top","0px"],["style","padding: 10px;background: #deeffd;margin-top: 10px;border-radius: 5px;",4,"ngIf"],[2,"text-align-last","center","margin-top","15px"],[2,"font-size","18px","font-weight","bold","background-color","transparent","padding","6px 8px","color","#002a68","text-transform","uppercase"],["wrap",""],["size","4","style","padding: 0;",4,"ngFor","ngForOf"],["style","text-align: center;margin-top: 15px;",4,"ngIf"],["threshold","5%","position","center",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando..."],["align","center",1,"title"],["size","2",1,"col-img"],[3,"src"],[2,"padding","10px","background","#deeffd","margin-top","10px","border-radius","5px"],["style","place-content: flex-end;margin-bottom: 10px;",4,"ngFor","ngForOf"],[2,"place-content","flex-end","margin-bottom","10px"],["name","close-outline",1,"remove-image",3,"click"],[1,"img-content",3,"src"],["name","close-outline",1,"remove-video",3,"click"],["controls","","autoplay","",2,"width","100%"],["videoCompetence",""],["size","4",2,"padding","0"],[2,"height","100%","align-items","center","justify-content","center"],["class","card-posts",4,"ngIf"],[1,"card-posts"],[3,"src","click",4,"ngIf"],["autoplay","","loop","","style","width: 100%;height: 380px;",3,"muted","src","click",4,"ngIf"],[3,"src","click"],["autoplay","","loop","",2,"width","100%","height","380px",3,"muted","src","click"],[2,"text-align","center","margin-top","15px"],["color","warning",2,"font-size","14px"]],template:function(e,t){if(1&e&&(d.bc(0,"ion-header",null,0),d.bc(2,"ion-toolbar",1),d.bc(3,"ion-buttons",2),d.jc("click",(function(){return t.back()})),d.Wb(4,"ion-icon",3),d.ac(),d.bc(5,"ion-title",4),d.bc(6,"label",5),d.Qc(7,"MAGIN"),d.ac(),d.ac(),d.ac(),d.ac(),d.bc(8,"ion-content",6),d.Wb(9,"div",7),d.bc(10,"div",8),d.Oc(11,y,3,0,"div",9),d.Oc(12,w,3,0,"div",9),d.Wb(13,"br"),d.bc(14,"ion-card",10),d.bc(15,"ion-row"),d.Oc(16,O,2,1,"ion-col",11),d.bc(17,"ion-col",12),d.bc(18,"textarea",13),d.jc("ngModelChange",(function(e){return t.message=e})),d.ac(),d.ac(),d.ac(),d.bc(19,"ion-row"),d.bc(20,"ion-col",14),d.bc(21,"ion-card",15),d.jc("click",(function(){return t.selectImg()})),d.Wb(22,"img",16),d.bc(23,"ion-label",17),d.Qc(24,"Imagen"),d.ac(),d.ac(),d.ac(),d.bc(25,"ion-col",14),d.bc(26,"ion-card",15),d.jc("click",(function(){return t.loadVideo()})),d.Wb(27,"img",18),d.bc(28,"ion-label",17),d.Qc(29,"Video"),d.ac(),d.ac(),d.ac(),d.ac(),d.bc(30,"ion-row"),d.bc(31,"ion-col",19),d.bc(32,"ion-card",20),d.jc("click",(function(){return t.post()})),d.Wb(33,"img",21),d.bc(34,"ion-label",22),d.Qc(35,"Guardar"),d.ac(),d.ac(),d.ac(),d.ac(),d.bc(36,"ion-row"),d.bc(37,"ion-col",23),d.Oc(38,C,2,1,"div",24),d.Oc(39,j,5,0,"div",24),d.ac(),d.ac(),d.ac(),d.bc(40,"div",25),d.bc(41,"ion-badge",26),d.Qc(42,"Publicaciones"),d.ac(),d.ac(),d.bc(43,"ion-grid"),d.bc(44,"ion-row",27),d.Oc(45,D,3,1,"ion-col",28),d.ac(),d.ac(),d.Oc(46,T,3,0,"div",29),d.bc(47,"ion-infinite-scroll",30),d.jc("ionInfinite",(function(e){return t.loadData(e)})),d.Wb(48,"ion-infinite-scroll-content",31),d.ac(),d.Wb(49,"br"),d.ac(),d.ac()),2&e){const e=d.Ec(1);d.Ib(8),d.uc("fullscreen",!0)("appHideHeader",e)("scrollEvents",!0),d.Ib(1),d.uc("ngStyle",d.zc(13,S,t.colors[t.idAction-1])),d.Ib(2),d.uc("ngIf",1==t.idAction),d.Ib(1),d.uc("ngIf",2==t.idAction),d.Ib(4),d.uc("ngIf",t.usertk),d.Ib(2),d.uc("ngModel",t.message)("placeholder",t.placeholder(t.idAction)),d.Ib(20),d.uc("ngIf",t.photos.length>0),d.Ib(1),d.uc("ngIf",t.url),d.Ib(6),d.uc("ngForOf",t.posts),d.Ib(1),d.uc("ngIf",0===t.posts.length)}},directives:[c.y,c.db,c.k,c.z,c.cb,c.s,k.a,o.n,o.m,c.l,c.P,c.r,n.c,n.p,n.s,c.F,c.i,c.x,o.l,c.B,c.C],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.oval[_ngcontent-%COMP%]{width:100%;height:7%;border-radius:0 0 100px 100px;position:absolute}.title[_ngcontent-%COMP%]{font-size:18px;position:relative;color:#fff}.input-message[_ngcontent-%COMP%]{width:98%;resize:none;border-radius:5px;border:1px solid #dedede;height:60px;-moz-text-align-last:center;text-align-last:center;padding:5px}.remove-image[_ngcontent-%COMP%]{position:absolute;margin:20px}.remove-image[_ngcontent-%COMP%], .remove-video[_ngcontent-%COMP%]{padding:0 1px;font-size:22px;background-color:#ff4b4b;border-radius:10px;color:#fff;font-weight:700}.remove-video[_ngcontent-%COMP%]{margin-bottom:3px}.div-video[_ngcontent-%COMP%]{padding:10px 25px;background-color:#d4d4d4;margin:10px 25px;border-radius:5px}.border-post[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-bottom:none;border-radius:12px}.boder[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-bottom:0}.avatar-user[_ngcontent-%COMP%]{width:60px;height:70px;margin:5px 15px 0 0}.name-user[_ngcontent-%COMP%]{font-size:17px;text-transform:capitalize;margin-bottom:0}.card-sport[_ngcontent-%COMP%]{border-left:4px solid #ff9800}.card-academic[_ngcontent-%COMP%]{border-left:4px solid #4caf50}.itemCssFActividad[_ngcontent-%COMP%]{--background:var(--ion-item-background,var(--ion-background-color,hsla(0,0%,99.2%,0.7450980392156863)))!important;box-shadow:10px #000}.card-buttons[_ngcontent-%COMP%]{margin:0;box-shadow:none;border:1px solid #deeffd;border-radius:10px;padding:0;display:grid;place-items:center;height:40px;background-color:rgba(33,150,243,.14901960784313725)}.label-buttons[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.card-posts[_ngcontent-%COMP%]{margin:5px;border-radius:10px;height:120px;display:flex;align-items:center;place-content:center}  .match-item-action-sheet .action-sheet-group.sc-ion-action-sheet-md{border-top-left-radius:0;border-top-right-radius:0;background-color:#fff}  .match-item-action-sheet .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-icon.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-title.sc-ion-action-sheet-md{color:#000}  .match-item-action-sheet .action-sheet-group-cancel .action-sheet-button-inner.sc-ion-action-sheet-md,   .match-item-action-sheet .action-sheet-group-cancel .action-sheet-icon.sc-ion-action-sheet-md{color:#f44336}"]}),e})()}];let E=(()=>{class e{}return e.\u0275mod=d.Tb({type:e}),e.\u0275inj=d.Sb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(_)],a.j]}),e})();var z=i("HsBR"),H=i("Fgaq");let F=(()=>{class e{}return e.\u0275mod=d.Tb({type:e}),e.\u0275inj=d.Sb({factory:function(t){return new(t||e)},imports:[[o.c,n.k,c.eb,E,z.a,H.a]]}),e})()}}]);