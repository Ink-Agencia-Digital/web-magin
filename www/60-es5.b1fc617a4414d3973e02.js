function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{icFu:function(e,t,n){"use strict";n.r(t),n.d(t,"MisObjetivosPageModule",(function(){return Q}));var i=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),c=n("tyNb"),r=n("mrSG"),s=n("sWYD"),d=n("fXoL"),l=n("VnPy"),b=n("8rbx"),g=n("7Vn+"),u=n("3no8"),f=n("dNgK");function p(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-badge",19),d.jc("click",(function(){d.Hc(n);var e=d.nc();return e.addTarget=!0,e.edit=!1})),d.Qc(1,"Agregar un nuevo objetivo"),d.ac()}}function h(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-badge",20),d.jc("click",(function(){d.Hc(n);var e=d.nc();return e.addTarget=!1,e.form.reset()})),d.Qc(1,"Cerrar Formulario"),d.ac()}}function m(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-badge",20),d.jc("click",(function(){d.Hc(n);var e=d.nc();return e.addTarget=!1,e.form.reset(),e.edit=!1})),d.Qc(1,"Cancelar"),d.ac()}}function v(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-button",29),d.jc("click",(function(){return d.Hc(n),d.nc(2).operar()})),d.Qc(1,"Agregar a la lista"),d.ac()}if(2&e){var i=d.nc(2);d.uc("disabled",!i.form.valid)}}function x(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-button",29),d.jc("click",(function(){return d.Hc(n),d.nc(2).editar()})),d.Qc(1,"Editar"),d.ac()}if(2&e){var i=d.nc(2);d.uc("disabled",!i.form.valid)}}function k(e,t){if(1&e&&(d.bc(0,"ion-card",21),d.bc(1,"ion-card-header"),d.bc(2,"ion-card-title",22),d.Qc(3,"Nuevo objetivo"),d.ac(),d.ac(),d.bc(4,"ion-card-content"),d.bc(5,"div"),d.bc(6,"form",23),d.bc(7,"div"),d.bc(8,"ion-item",24),d.Wb(9,"textarea",25),d.ac(),d.bc(10,"ion-item",24),d.Wb(11,"ion-datetime",26,27),d.ac(),d.ac(),d.bc(13,"div",13),d.Oc(14,v,2,1,"ion-button",28),d.Oc(15,x,2,1,"ion-button",28),d.ac(),d.ac(),d.ac(),d.ac(),d.ac()),2&e){var n=d.nc();d.Ib(6),d.uc("formGroup",n.form),d.Ib(8),d.uc("ngIf",!n.edit),d.Ib(1),d.uc("ngIf",n.edit)}}function j(e,t){1&e&&(d.bc(0,"ion-label",42),d.Qc(1," - "),d.ac())}function O(e,t){if(1&e&&(d.bc(0,"ion-badge",43),d.Qc(1),d.ac()),2&e){var n=d.nc().$implicit;d.Ib(1),d.Sc(" ",n.date,"")}}function C(e,t){if(1&e){var n=d.cc();d.bc(0,"ion-item",36),d.jc("click",(function(){d.Hc(n);var e=t.$implicit,i=t.index;return d.nc(2).editTarget(e,i)})),d.bc(1,"ion-reorder"),d.Wb(2,"ion-icon",37),d.ac(),d.bc(3,"div",38),d.bc(4,"ion-label",39),d.Qc(5),d.ac(),d.Oc(6,j,2,0,"ion-label",40),d.Oc(7,O,2,1,"ion-badge",41),d.ac(),d.ac()}if(2&e){var i=t.$implicit;d.Ib(5),d.Sc(" ",i.achievement," "),d.Ib(1),d.uc("ngIf",i.date),d.Ib(1),d.uc("ngIf",i.date)}}function w(e,t){if(1&e){var n=d.cc();d.bc(0,"div",30),d.bc(1,"ion-list"),d.bc(2,"ion-list-header",31),d.bc(3,"ion-label"),d.Qc(4,"Objetivos"),d.ac(),d.ac(),d.bc(5,"ion-reorder-group",32),d.jc("ionItemReorder",(function(e){return d.Hc(n),d.nc().reorder(e)})),d.Oc(6,C,8,3,"ion-item",33),d.ac(),d.ac(),d.bc(7,"div",34),d.bc(8,"ion-button",35),d.jc("click",(function(){return d.Hc(n),d.nc().submit()})),d.Qc(9,"Guardar"),d.ac(),d.ac(),d.ac()}if(2&e){var i=d.nc();d.Ib(6),d.uc("ngForOf",i.objetivosList)}}function y(e,t){1&e&&(d.bc(0,"ion-row",44),d.bc(1,"ion-badge",45),d.Qc(2,"No existen objetivos"),d.ac(),d.ac())}var P,I,M,_=[{path:"",component:(P=function(){function e(t,n,i,a,o,c,r){_classCallCheck(this,e),this.route=t,this.alertController=n,this.share=i,this.log=a,this.auth=o,this.loadingService=c,this.snackbar=r,this.submitted=!1,this.list=[],this.objetivosList=[],this.addTarget=!1,this.isSubmitted=!1,this.edit=!1,this.targetEdit=null,this.indexEdit=null,this.getToken()}return _createClass(e,[{key:"ngOnInit",value:function(){this.loadForm()}},{key:"getToken",value:function(){var e=this;this.auth.gettokenLog().then((function(t){e.token=t,e.getTargets()}))}},{key:"loadForm",value:function(){this.form=new a.h({target:new a.f("",[a.v.required,a.v.minLength(3),a.v.maxLength(510)]),date:new a.f("")})}},{key:"getTargets",value:function(){var e=this;this.loadingService.loadingPresent({spinner:"circles"}),this.auth.gettokenLog().then((function(t){e.log.logdataInfData(t).subscribe((function(t){e.userId=t.id,e.share.obtenerObhetivos(e.userId,e.token).subscribe((function(t){e.objetivosList=t.data.sort((function(e,t){return 0-e.priority<t.priority?-1:1})),e.loadingService.loadingDismiss()}),(function(t){e.loadingService.loadingDismiss()}))}),(function(t){e.loadingService.loadingDismiss()}))}))}},{key:"operar",value:function(){if(!this.form.valid)return this.mostrarmensaje("Los datos ingresados no son validos","Error","red-snackbar"),!1;var e="";this.form.value.date&&(e=Object(s.a)(new Date(this.form.value.date),"yyyy-MM-dd")),this.objetivosList.push({achievement:this.form.value.target,date:e}),this.addTarget=!1,this.form.reset(),this.loadingService.showMessageCoins("20")}},{key:"submit",value:function(){var e=this,t=[],n=1;this.objetivosList.map((function(e){t.push({achievement:e.achievement,priority:n,date:e.date}),n++})),this.loadingService.loadingPresent({spinner:"circles"}),this.share.agregarObjetivos({objectives:t,user_id:this.userId},this.token).subscribe((function(t){return Object(r.b)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t?(this.loadingService.loadingDismiss(),this.mostrarmensaje("Los objetivos se han guardado satisfactoriamente","OK","green-snackbar")):(this.loadingService.loadingDismiss(),this.mostrarmensaje("Error guardando los objetivos","Error","red-snackbar"));case 1:case"end":return e.stop()}}),e,this)})))}),(function(t){e.loadingService.loadingDismiss(),e.mostrarmensaje("Error guardando los objetivos","Error","red-snackbar")}))}},{key:"editTarget",value:function(e,t){this.addTarget=!0,this.edit=!0,this.targetEdit=e,this.indexEdit=t,this.form.patchValue({target:e.achievement,date:e.date})}},{key:"editar",value:function(){var e=this,t=this.objetivosList.find((function(t){return t.id==e.targetEdit.id}));if(t){t.achievement=this.form.value.target;var n="";this.form.value.date&&(n=Object(s.a)(new Date(this.form.value.date),"yyyy-MM-dd")),t.date=n,this.form.reset()}else this.objetivosList.slice(this.indexEdit,1),this.operar();this.addTarget=!1,this.edit=!1}},{key:"alerta",value:function(){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({header:"UPS!",subHeader:"No puedes hacer eso",message:"No puedes Poner objetivos vac\xedos Agrega tus Objetivos para poder guiarte",buttons:["Acepto"]});case 2:return this.alert=e.sent,e.next=5,this.alert.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"volver",value:function(){this.route.navigateByUrl("/users/perfil")}},{key:"reorder",value:function(e){var t=this.objetivosList.splice(e.detail.from,1)[0];this.objetivosList.splice(e.detail.to,0,t),e.detail.complete()}},{key:"mostrarmensaje",value:function(e,t,n){this.snackbar.open(e,t,{duration:2e3,panelClass:[n]})}}]),e}(),P.\u0275fac=function(e){return new(e||P)(d.Vb(c.h),d.Vb(o.b),d.Vb(l.a),d.Vb(b.a),d.Vb(g.a),d.Vb(u.a),d.Vb(f.a))},P.\u0275cmp=d.Pb({type:P,selectors:[["app-mis-objetivos"]],decls:40,vars:6,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"color","white"],["defaultHref","/users/perfil"],[1,"tituloInfo","logo"],[2,"color","white"],[1,"title"],[1,"subtitle"],[1,"badge-instructions"],[2,"margin-left","15px"],[2,"font-size","13px","font-weight","500"],[2,"margin-left","15px","margin","10px 10px 0px"],[2,"font-size","12px","font-weight","500","color","#939393"],[2,"margin-left","15px","margin","0px 10px"],[2,"text-align","center"],["class","badge-new",3,"click",4,"ngIf"],["class","badge-cancelar",3,"click",4,"ngIf"],["class","card-add",4,"ngIf"],["class","container-targets",4,"ngIf"],["style","place-content: center;margin-top: 10px;",4,"ngIf"],[1,"badge-new",3,"click"],[1,"badge-cancelar",3,"click"],[1,"card-add"],[1,"title-css",2,"text-align","center"],[3,"formGroup"],["lines","none",1,"ion-item-css"],["formControlName","target","placeholder","\xbfCual es tu objetivo?","rows","4","cols","150","maxlength","150","required","",1,"textArea"],["placeholder","Fecha de objetivo","displayFormat","YYYY/MM/DD","min","2021","max","2050","formControlName","date","cancelText","Cancelar","doneText","Hecho",1,"item-date"],["myPicker",""],["class","button-css-options",3,"disabled","click",4,"ngIf"],[1,"button-css-options",3,"disabled","click"],[1,"container-targets"],[2,"font-size","18px","font-weight","500","background","#002a68","color","white","text-transform","uppercase","display","block","text-align","center","padding","0"],["disabled","false",3,"ionItemReorder"],[3,"click",4,"ngFor","ngForOf"],[2,"text-align-last","center"],[1,"button-end",3,"click"],[3,"click"],["name","medal-outline",1,"icon-target"],[2,"margin-left","10px","width","100%","display","flex"],[1,"label-target"],["style","margin: 0px 10px;",4,"ngIf"],["class","badge-date",4,"ngIf"],[2,"margin","0px 10px"],[1,"badge-date"],[2,"place-content","center","margin-top","10px"],["color","danger",2,"font-size","14px","padding","5px 10px","border-radius","5px"]],template:function(e,t){1&e&&(d.bc(0,"ion-header"),d.bc(1,"ion-toolbar",0),d.bc(2,"ion-buttons",1),d.Wb(3,"ion-back-button",2),d.ac(),d.bc(4,"ion-title",3),d.bc(5,"label",4),d.Qc(6,"MAGIN"),d.ac(),d.ac(),d.ac(),d.ac(),d.bc(7,"ion-content"),d.bc(8,"ion-card-title",5),d.Qc(9,"\xbfQu\xe9 objetivos quieres alcanzar con nuestros programas?"),d.ac(),d.bc(10,"ion-card-subtitle",6),d.Qc(11,"Organiza estos objetivos seg\xfan t\xfa inter\xe9s y actualidad deportiva."),d.ac(),d.bc(12,"div"),d.bc(13,"ion-badge",7),d.Qc(14,"Instrucciones:"),d.ac(),d.bc(15,"div",8),d.bc(16,"ion-label",9),d.Qc(17," 1. Lee atentamente los objetivos propuestos. "),d.ac(),d.ac(),d.bc(18,"div",8),d.bc(19,"ion-label",9),d.Qc(20," 2. Utiliza el icono azul que encuentras al inicio de cada objetivo para organizarlos. "),d.ac(),d.ac(),d.bc(21,"div",8),d.bc(22,"ion-label",9),d.Qc(23," 3. Desliza los objetivos conforme a tu prioridad. "),d.ac(),d.ac(),d.bc(24,"div",8),d.bc(25,"ion-label",9),d.Qc(26," 4. Despu\xe9s de organizar tus objetivos presiona finalizar. "),d.ac(),d.ac(),d.bc(27,"div",10),d.bc(28,"ion-label",11),d.Qc(29," *Nota. Estos objetivos podr\xe1s modificarlos posteriormente. "),d.ac(),d.ac(),d.bc(30,"div",12),d.bc(31,"ion-label",11),d.Qc(32," *Nota. Recuerda que para modificar un objetivo debes seleccionarlo. "),d.ac(),d.ac(),d.ac(),d.bc(33,"div",13),d.Oc(34,p,2,0,"ion-badge",14),d.Oc(35,h,2,0,"ion-badge",15),d.Oc(36,m,2,0,"ion-badge",15),d.Oc(37,k,16,3,"ion-card",16),d.ac(),d.Oc(38,w,10,1,"div",17),d.Oc(39,y,3,0,"ion-row",18),d.ac()),2&e&&(d.Ib(34),d.uc("ngIf",!t.addTarget),d.Ib(1),d.uc("ngIf",t.addTarget&&!t.edit),d.Ib(1),d.uc("ngIf",t.addTarget&&t.edit),d.Ib(1),d.uc("ngIf",t.addTarget),d.Ib(1),d.uc("ngIf",t.objetivosList.length>0),d.Ib(1),d.uc("ngIf",0===t.objetivosList.length))},directives:[o.y,o.db,o.k,o.g,o.h,o.cb,o.s,o.p,o.o,o.i,o.F,i.m,o.l,o.n,o.m,a.w,a.q,a.i,o.E,a.c,a.p,a.g,a.l,a.u,o.t,o.ob,o.j,o.G,o.H,o.N,i.l,o.M,o.z,o.P],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.button-css-options[_ngcontent-%COMP%]{font-size:10px;letter-spacing:1px;margin-top:5px;width:60%;--background:#002a68!important}.textArea[_ngcontent-%COMP%]{width:100%;display:block;resize:none;border-radius:5px;padding:5px 10px;border-color:#c7c7c7}.title-css[_ngcontent-%COMP%]{font-size:13px;font-weight:500}.Subtitle-css[_ngcontent-%COMP%], .title-css[_ngcontent-%COMP%]{color:#080808;letter-spacing:1px}.Subtitle-css[_ngcontent-%COMP%]{font-size:7px;line-height:12px;margin:0;padding:7px;text-transform:uppercase;font-weight:700}.ion-item-css[_ngcontent-%COMP%]{font-size:12px;width:100%;text-align:center;margin-bottom:10px}.expansionCsss[_ngcontent-%COMP%]{background-color:rgba(248,249,250,.527)}.larger[_ngcontent-%COMP%]{display:inline-block;font-size:20px;color:#002a68!important}.larger[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{text-align:center}.title[_ngcontent-%COMP%]{padding:10px 25px;font-size:16px;font-weight:700;text-transform:uppercase;color:#000}.icon-add[_ngcontent-%COMP%]{color:#fff;margin:5px 15px 0 0}.container-targets[_ngcontent-%COMP%]{text-align:center;margin-top:15px}.label-instructions[_ngcontent-%COMP%]{background-color:#fff;padding:5px;font-weight:700;font-size:13px;margin-left:15px;color:#002a68;text-transform:uppercase}.icon-target[_ngcontent-%COMP%]{color:#fff;background-color:#002a68;padding:5px;border-radius:10px;margin-right:5px}.label-target[_ngcontent-%COMP%]{white-space:normal;font-size:14px;font-weight:500;width:70%}.button-end[_ngcontent-%COMP%]{--background:#002a68;margin-bottom:15px}.badge-date[_ngcontent-%COMP%]{font-size:12px;padding:4px 5px;font-weight:500;place-self:center}.subtitle[_ngcontent-%COMP%]{padding:10px 20px;font-size:15px;text-align:center}.badge-instructions[_ngcontent-%COMP%]{background-color:#fff;padding:5px;font-weight:700;font-size:13px;margin-left:15px;color:#002a68;text-transform:uppercase}.card-add[_ngcontent-%COMP%]{margin:10px 20px;border-radius:10px;border-left:4px solid #002a68}.item-date[_ngcontent-%COMP%]{width:100%;border:1px solid #c7c7c7;border-radius:5px;padding:10px}.badge-new[_ngcontent-%COMP%]{background-color:#002a68}.badge-cancelar[_ngcontent-%COMP%], .badge-new[_ngcontent-%COMP%]{margin-top:10px;padding:8px 10px;font-size:15px}.badge-cancelar[_ngcontent-%COMP%]{background-color:#f44336}"]}),P)}],z=((M=function e(){_classCallCheck(this,e)}).\u0275mod=d.Tb({type:M}),M.\u0275inj=d.Sb({factory:function(e){return new(e||M)},imports:[[c.j.forChild(_)],c.j]}),M),Q=((I=function e(){_classCallCheck(this,e)}).\u0275mod=d.Tb({type:I}),I.\u0275inj=d.Sb({factory:function(e){return new(e||I)},imports:[[i.c,a.k,o.eb,z,a.t]]}),I)}}]);