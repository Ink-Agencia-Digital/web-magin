(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{wcDs:function(e,n,i){"use strict";i.r(n),i.d(n,"ExamenPageModule",(function(){return O}));var a=i("ofXK"),t=i("3Pt+"),c=i("TEn/"),o=i("tyNb"),r=i("mrSG"),s=i("fXoL"),l=i("7Vn+"),d=i("KB8S"),u=i("h7Fw"),p=i("3no8"),b=i("VnPy"),g=i("dNgK"),h=i("8rbx");const m=["slider"];function f(e,n){if(1&e){const e=s.cc();s.bc(0,"ion-textarea",28),s.jc("ngModelChange",(function(n){return s.Hc(e),s.nc().$implicit.answer=n}))("ionChange",(function(){s.Hc(e);const n=s.nc().$implicit;return s.nc(2).validate(n.answer)})),s.ac()}if(2&e){const e=s.nc().$implicit;s.uc("ngModel",e.answer)}}function x(e,n){if(1&e){const e=s.cc();s.bc(0,"ion-item"),s.bc(1,"ion-range",29),s.jc("ngModelChange",(function(n){return s.Hc(e),s.nc().$implicit.answer=n}))("ionChange",(function(){s.Hc(e);const n=s.nc().$implicit;return s.nc(2).validate(n.answer)}))("ionFocus",(function(){return s.Hc(e),s.nc(3).block()})),s.bc(2,"ion-label",30),s.Qc(3,"1"),s.ac(),s.bc(4,"ion-label",31),s.Qc(5,"5"),s.ac(),s.ac(),s.ac()}if(2&e){const e=s.nc().$implicit;s.Ib(1),s.uc("ngModel",e.answer)}}function w(e,n){if(1&e&&(s.bc(0,"ion-item"),s.bc(1,"ion-label",35),s.Qc(2),s.ac(),s.Wb(3,"ion-radio",36),s.ac()),2&e){const e=n.$implicit;s.Ib(2),s.Rc(e),s.Ib(1),s.vc("value",e)}}function k(e,n){if(1&e){const e=s.cc();s.bc(0,"ion-list",32),s.bc(1,"ion-radio-group",33),s.jc("ngModelChange",(function(n){return s.Hc(e),s.nc().$implicit.answer=n}))("ionChange",(function(){s.Hc(e);const n=s.nc().$implicit;return s.nc(2).validate(n.answer)})),s.bc(2,"ion-list-header"),s.bc(3,"ion-label"),s.Qc(4," Opciones de respuestas "),s.ac(),s.ac(),s.Oc(5,w,4,2,"ion-item",34),s.ac(),s.ac()}if(2&e){const e=s.nc().$implicit;s.Ib(1),s.uc("ngModel",e.answer),s.Ib(4),s.uc("ngForOf",e.respuestas)}}function v(e,n){if(1&e){const e=s.cc();s.bc(0,"ion-slide",18),s.bc(1,"div"),s.bc(2,"ion-badge",19),s.Qc(3),s.ac(),s.ac(),s.bc(4,"h1",20),s.Qc(5),s.ac(),s.Oc(6,f,1,1,"ion-textarea",21),s.Oc(7,x,6,1,"ion-item",22),s.Oc(8,k,6,2,"ion-list",23),s.bc(9,"ion-card-content",24),s.Wb(10,"div",15),s.bc(11,"div",16),s.bc(12,"ion-label"),s.Qc(13,"Recuerda deslizar la pantalla a la izquierda para cambiar de pregunta y avanzar en el examen."),s.ac(),s.ac(),s.ac(),s.bc(14,"div",25),s.bc(15,"ion-button",26),s.jc("click",(function(){return s.Hc(e),s.nc(2).post()})),s.Wb(16,"ion-icon",27),s.Qc(17," Terminar "),s.ac(),s.ac(),s.ac()}if(2&e){const e=n.$implicit,i=n.index,a=s.nc(2);s.Ib(3),s.Tc("",i+1,"/",a.preguntas.length,""),s.Ib(2),s.Rc(e.pregunta),s.Ib(1),s.uc("ngIf","Abierta"===e.tiporespuesta),s.Ib(1),s.uc("ngIf","Num\xe9rica"===e.tiporespuesta),s.Ib(1),s.uc("ngIf","Multiple"===e.tiporespuesta),s.Ib(1),s.uc("hidden",i+1===a.preguntas.length),s.Ib(5),s.uc("hidden",i+1!==a.preguntas.length),s.Ib(1),s.uc("disabled",!e.answer)}}function I(e,n){if(1&e){const e=s.cc();s.bc(0,"ion-slides",7,8),s.jc("ionSlideWillChange",(function(){return s.Hc(e),s.nc().checkSlide()})),s.bc(2,"ion-slide",9),s.bc(3,"div",10),s.bc(4,"p"),s.Qc(5," Felicidades, acabas de terminar todas las lecciones del curso "),s.bc(6,"strong"),s.Qc(7),s.ac(),s.Qc(8,", a continuaci\xf3n debes responder un examen, recuerda que al finalizar dependiendo de tu calificaci\xf3n obtendr\xe1s un trofeo. "),s.ac(),s.ac(),s.bc(9,"div",10),s.bc(10,"ion-label",11),s.Qc(11,"N\xfamero de preguntas del examen:"),s.ac(),s.bc(12,"div",12),s.bc(13,"ion-badge",13),s.Qc(14),s.ac(),s.ac(),s.ac(),s.bc(15,"ion-card-content",14),s.Wb(16,"div",15),s.bc(17,"div",16),s.bc(18,"ion-label"),s.Qc(19,"Recuerda deslizar la pantalla a la izquierda para dar inicio al examen."),s.ac(),s.ac(),s.ac(),s.ac(),s.Oc(20,v,18,9,"ion-slide",17),s.ac()}if(2&e){const e=s.nc();s.Ib(7),s.Rc(e.informacion.infoCurso.name),s.Ib(7),s.Rc(e.preguntas.length),s.Ib(6),s.uc("ngForOf",e.preguntas)}}function C(e,n){1&e&&(s.bc(0,"div",37),s.bc(1,"ion-badge",38),s.Qc(2,"No existen preguntas para el curso"),s.ac(),s.ac())}const y=[{path:"",component:(()=>{class e{constructor(e,n,i,a,t,c,o,r,s){this.auth=e,this.pObjectIndex=n,this.pObjecto=i,this.loadingService=a,this.share=t,this.router=c,this.alertController=o,this.snackbar=r,this.log=s,this.user=null,this.id=null,this.preguntas=[],this.getToken(),this.refreshPage()}ngOnInit(){this.leccion=this.pObjectIndex.getData(),this.informacion=this.pObjecto.getNavData()}ngOnDestroy(){this.subscription.unsubscribe()}refreshPage(){this.subscription=this.share.varExamen.subscribe(e=>{this.loadPage()})}getToken(){this.auth.gettokenLog().then(e=>{this.token=e,this.log.logdataInfData(this.token).subscribe(e=>{this.user=e,this.loadPage()})})}loadPage(){this.share.obtenerCursos(this.token).subscribe(e=>{if(e.data.length>0){const n=e.data.find(e=>e.id===this.informacion.infoCurso.id);n?n.examen?this.share.obtenerExamenes(n.examen.id,this.token).subscribe(e=>{e.data.length>0&&(this.preguntas=e.data,this.preguntas.map(e=>{e.id_user=this.user.id,"Multiple"===e.tiporespuesta&&(e.respuestas=e.opciones.split(","))}),setTimeout(()=>{this.slidefromHtml.lockSwipes(!1)},100))},e=>{this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}):this.mostrarmensaje("El curso no tiene configurado un examen","Error","red-snackbar"):this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}else this.mostrarmensaje("No existen cursos","Error","red-snackbar")},e=>{this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")})}checkSlide(){this.slidefromHtml.getActiveIndex().then(e=>{this.slidefromHtml.lockSwipeToNext(!(0===e||this.preguntas[e-1]&&this.preguntas[e-1].answer))})}block(){this.slidefromHtml.lockSwipes(!0)}validate(e){this.slidefromHtml.lockSwipes(!1),this.slidefromHtml.lockSwipeToNext(!e)}post(){var e=[];this.preguntas.map(n=>{e.push({id_user:n.id_user,id_examen:n.id_examen,pregunta:n.pregunta,respuesta:n.answer,valor:n.valor})}),e.length>0?this.share.guardarExamenes(e,this.token).subscribe(e=>{this.loadingService.showMessageCoins("15"),this.alertProgreso(),this.share.varLeciones.next(),this.router.navigateByUrl("/users/entrena/vercurso")},e=>{this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}):this.mostrarmensaje("Ah ocurrido un error, comuniquese con el administrador","Error","red-snackbar")}alertProgreso(){return Object(r.b)(this,void 0,void 0,(function*(){this.alert=yield this.alertController.create({header:"Felicidades",subHeader:"Terminaste el examen",message:"Espera a que tu examen sea calificado y ve a la secci\xf3n de trofeos e insignias para descubrir tu trofeo",buttons:["OK"]}),yield this.alert.present()}))}mostrarmensaje(e,n,i){this.snackbar.open(e,n,{duration:2e3,panelClass:[i]})}}return e.\u0275fac=function(n){return new(n||e)(s.Vb(l.a),s.Vb(d.a),s.Vb(u.a),s.Vb(p.a),s.Vb(b.a),s.Vb(o.h),s.Vb(c.b),s.Vb(g.a),s.Vb(h.a))},e.\u0275cmp=s.Pb({type:e,selectors:[["app-examen"]],viewQuery:function(e,n){var i;1&e&&s.Wc(m,!0),2&e&&s.Dc(i=s.kc())&&(n.slidefromHtml=i.first)},decls:12,vars:2,consts:[[1,"ion-toolbar-ccs"],[1,"tituloInfo","logo"],[2,"color","white"],[2,"text-align","center","margin-top","15px"],[2,"font-weight","500","font-size","18px","width","100%","background","#002a68","padding","10px","text-transform","uppercase"],["pager","true",3,"ionSlideWillChange",4,"ngIf"],["style","text-align: center; margin-top: 10px;",4,"ngIf"],["pager","true",3,"ionSlideWillChange"],["slider",""],[1,"slide-examen",2,"display","block"],[2,"padding","10px 25px","text-align","justify"],[2,"display","block","text-align","center"],[2,"text-align-last","center"],[2,"font-weight","500","font-size","15px","background","#002a68","padding","5px 8px","margin-top","10px"],[2,"padding","0px 5px 20px"],[1,"card","card-3"],[1,"label-swipe"],["style","width: 360px;display: block;padding: 5px 25px;",4,"ngFor","ngForOf"],[2,"width","360px","display","block","padding","5px 25px"],[2,"font-size","15px","font-weight","500","padding","6px 10px","border-radius","10px"],[2,"margin","0","font-size","20px","padding","0px 10px"],["class","answer-open","placeholder","Digita tu respuesta",3,"ngModel","ngModelChange","ionChange",4,"ngIf"],[4,"ngIf"],["style","height: 250px;overflow: auto;",4,"ngIf"],[2,"padding","0px 5px 20px",3,"hidden"],[2,"margin-top","15px",3,"hidden"],["size","small",1,"footer-dis-bot1",3,"disabled","click"],["name","enter-outline"],["placeholder","Digita tu respuesta",1,"answer-open",3,"ngModel","ngModelChange","ionChange"],["min","1","max","5","pin","","snaps","","color","secondary","debounce","500",3,"ngModel","ngModelChange","ionChange","ionFocus"],["slot","start"],["slot","end"],[2,"height","250px","overflow","auto"],[3,"ngModel","ngModelChange","ionChange"],[4,"ngFor","ngForOf"],[2,"white-space","break-spaces"],[3,"value"],[2,"text-align","center","margin-top","10px"],[2,"font-size","15px","font-weight","500","background","#ff9800","color","black"]],template:function(e,n){1&e&&(s.bc(0,"ion-header"),s.bc(1,"ion-toolbar",0),s.bc(2,"ion-title",1),s.bc(3,"label",2),s.Qc(4,"MAGIN"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(5,"ion-content"),s.bc(6,"div",3),s.bc(7,"ion-badge",4),s.Qc(8,"Examen"),s.ac(),s.ac(),s.bc(9,"ion-content"),s.Oc(10,I,21,3,"ion-slides",5),s.Oc(11,C,3,0,"div",6),s.ac(),s.ac()),2&e&&(s.Ib(10),s.uc("ngIf",n.preguntas.length>0),s.Ib(1),s.uc("ngIf",0===n.preguntas.length))},directives:[c.y,c.db,c.cb,c.s,c.i,a.m,c.W,c.V,c.F,c.m,a.l,c.j,c.z,c.ab,c.pb,t.p,t.s,c.E,c.L,c.ob,c.G,c.K,c.H,c.J,c.mb],styles:[".question[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.answer-open[_ngcontent-%COMP%]{border:1px solid #d4d4d4;border-radius:10px;font-size:14px;height:324px}.card-3[_ngcontent-%COMP%]{background-image:url(swipe.1a8c7cab8aa37c661926.gif);background-repeat:no-repeat;background-position:50%;background-size:113px;box-shadow:none!important;border-radius:10px;height:130px}.label-swipe[_ngcontent-%COMP%]{text-align:justify;padding:20px 10px}.slide-examen[_ngcontent-%COMP%]{display:block!important}"]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=s.Tb({type:e}),e.\u0275inj=s.Sb({factory:function(n){return new(n||e)},imports:[[o.j.forChild(y)],o.j]}),e})(),O=(()=>{class e{}return e.\u0275mod=s.Tb({type:e}),e.\u0275inj=s.Sb({factory:function(n){return new(n||e)},imports:[[a.c,t.k,c.eb,j]]}),e})()}}]);