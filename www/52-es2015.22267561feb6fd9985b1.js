(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{hITH:function(e,i,t){"use strict";t.r(i),t.d(i,"CategoriaPageModule",(function(){return I}));var r=t("ofXK"),o=t("3Pt+"),n=t("TEn/"),s=t("tyNb"),c=t("mrSG"),a=t("fXoL"),l=t("7Vn+"),d=t("8rbx"),p=t("3no8"),f=t("AZGL"),b=t("dNgK"),u=t("h7Fw"),g=t("VnPy"),h=t("1as6");function m(e,i){if(1&e&&(a.bc(0,"div",11),a.bc(1,"ion-label",12),a.Qc(2),a.ac(),a.Wb(3,"br"),a.bc(4,"ion-label",13),a.Qc(5),a.ac(),a.ac()),2&e){const e=a.nc();a.Ib(2),a.Sc("\xa1Hola ",e.usertk.name,"!"),a.Ib(3),a.Sc(" ",e.profileUser," ")}}function v(e,i){1&e&&(a.bc(0,"div",14),a.bc(1,"ion-label",15),a.Qc(2,"Por favor selecciona el perfil deportivo con el que te identificas actualmente"),a.ac(),a.ac())}function x(e,i){if(1&e&&(a.bc(0,"ion-col",26),a.bc(1,"ion-card"),a.bc(2,"div"),a.bc(3,"ion-card-content",27),a.bc(4,"ion-label",28),a.Qc(5),a.oc(6,"capitalize"),a.ac(),a.ac(),a.ac(),a.ac(),a.ac()),2&e){const e=i.$implicit,t=a.nc().$implicit;a.Ib(1),a.Lb("card-profiles ",t.value.descriptions,""),a.Ib(4),a.Sc(" ",a.pc(6,4,e.name)," ")}}function k(e,i){if(1&e){const e=a.cc();a.bc(0,"div",16),a.bc(1,"div",17),a.bc(2,"ion-item",18),a.bc(3,"ion-checkbox",19),a.jc("ngModelChange",(function(t){a.Hc(e);const r=i.$implicit;return a.nc().selectProfile(t,r.value.index)})),a.ac(),a.bc(4,"p",20),a.Qc(5),a.ac(),a.ac(),a.ac(),a.bc(6,"div",21),a.bc(7,"ion-grid",22),a.bc(8,"ion-row",23),a.Oc(9,x,7,6,"ion-col",24),a.ac(),a.ac(),a.ac(),a.Wb(10,"hr",25),a.ac()}if(2&e){const e=i.$implicit;a.Ib(2),a.Lb("itemback ",e.value.color,""),a.uc("formGroupName",e.value.index),a.Ib(3),a.Rc(e.value.profile.name),a.Ib(4),a.uc("ngForOf",e.value.profile.descriptions)}}const P=[{path:"",component:(()=>{class e{constructor(e,i,t,r,o,n,s,c,a,l){this.auth=e,this.log=i,this.loadingService=t,this.porfiles=r,this.formBuilder=o,this.alertController=n,this.snackbar=s,this.pObjecto=c,this.router=a,this.share=l,this.colors=["card-1","card-2","card-3"],this.descriptions=["card-descriptions-1","card-descriptions-2","card-descriptions-3"],this.usertk=null,this.profileUser=null,this.profileId=null,this.minProfileSelected=e=>e.controls.map(e=>e.value.selected).reduce((e,i)=>i?e+i:e,0)>=1?null:{required:!0}}get profilesArray(){return this.form.get("profiles")}ngOnInit(){this.getToken(),this.loadForm()}getToken(){this.auth.gettokenLog().then(e=>{this.token=e,this.loadingService.loadingPresent({spinner:"circles"}),this.log.logdataInfData(e).subscribe(e=>{this.usertk=e,this.profileUser=this.usertk.profile.name,this.profileId=this.usertk.profile.id,this.getProfiles(),this.loadingService.loadingDismiss()},e=>{this.loadingService.loadingDismiss()})})}loadForm(){this.form=new o.h({profiles:this.formBuilder.array([],{validators:this.minProfileSelected})})}getProfiles(){this.loadingService.loadingPresent({message:"Por favor espere",spinner:"circles"}),this.porfiles.getProfiles(this.token).subscribe(e=>{this.loadProfiles(e),this.loadingService.loadingDismiss()},e=>{this.loadingService.loadingDismiss()})}loadProfiles(e){var i=0;e.data.map(e=>{this.profilesArray.push(this.formBuilder.group({index:new o.f(this.profilesArray.controls.length),profile:new o.f(e),selected:new o.f(e.id==this.profileId),color:new o.f(this.colors[i]),descriptions:new o.f(this.descriptions[i])})),2==i?i=0:i++})}selectProfile(e,i){e&&this.profilesArray.controls.filter(e=>e.get("index").value!==i).map(e=>{e.get("selected").setValue(!1)})}confirm(){return Object(c.b)(this,void 0,void 0,(function*(){const e=this;return this.alert=yield this.alertController.create({header:"\xa1TEN MUY PRESENTE!",message:"Al cambiar tu perfil actual modificar\xe1 todo tu programa de entrenamiento. \xbfEstas seguro que deseas ajustarlo?",buttons:[{text:"Confirmar",cssClass:"confirm-category",handler:()=>(this.alert.dismiss(!0),!1)},{text:"Cancelar",cssClass:"cancel-category",handler:()=>(this.alert.dismiss(!1),!1)}]}),yield this.alert.present(),yield this.alert.onDidDismiss().then(i=>{e.submit(i.data)}),!0}))}submit(e){if(!0===e){const e=this.profilesArray.controls.find(e=>!0===e.get("selected").value);e&&(e.value.profile.id===this.profileId?this.mostrarmensaje("Debes seleccionar un perfil distinto al actual","Error","red-snackbar"):(this.loadingService.loadingPresent({message:"Por favor espere",spinner:"circles"}),this.porfiles.updateProfile(this.usertk.id,e.value.profile.id,this.token).subscribe(i=>{this.profileUser=e.value.profile.name,this.profileId=e.value.profile.id,this.mostrarmensaje("Tu perfil ha sido ajustado","\xa1Muy bien!","green-snackbar"),this.loadingService.loadingDismiss()},e=>{this.loadingService.loadingDismiss()})))}}mostrarmensaje(e,i,t){this.snackbar.open(e,i,{duration:2e3,panelClass:[t]})}back(){this.share.varProfile.next({id:this.profileId,name:this.profileUser}),this.router.navigate(["/users/perfil"])}}return e.\u0275fac=function(i){return new(i||e)(a.Vb(l.a),a.Vb(d.a),a.Vb(p.a),a.Vb(f.a),a.Vb(o.e),a.Vb(n.b),a.Vb(b.a),a.Vb(u.a),a.Vb(s.h),a.Vb(g.a))},e.\u0275cmp=a.Pb({type:e,selectors:[["app-categoria"]],decls:16,vars:5,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"font-size","30px","color","white",3,"click"],["name","arrow-back-outline"],[1,"tituloInfo","logo"],[2,"color","white"],["style","margin-top: 10px;text-align: center;",4,"ngIf"],["style","text-align: center;margin: 10px",4,"ngIf"],[3,"formGroup"],["formArrayName","profiles","style","margin-bottom: 15px;text-align: -webkit-center;","lines","none",4,"ngFor","ngForOf"],[2,"text-align","center"],[1,"buttonCss",3,"disabled","click"],[2,"margin-top","10px","text-align","center"],[2,"font-size","22px","letter-spacing","1px"],[1,"label-profile"],[2,"text-align","center","margin","10px"],[2,"font-size","13px"],["formArrayName","profiles","lines","none",2,"margin-bottom","15px","text-align","-webkit-center"],[2,"text-align","-webkit-center","margin-bottom","2px","padding","0px 25px"],["lines","none",3,"formGroupName"],["slot","end","color","primary","formControlName","selected",3,"ngModelChange"],[2,"text-transform","uppercase","font-weight","bold","margin","0"],[2,"background-color","#a9a9a94d","width","95%","border-radius","10px","margin","10px 0px","padding","5px"],["lines","none"],[2,"align-items","center"],["size","4",4,"ngFor","ngForOf"],[1,"hr-descriptions"],["size","4"],[1,"content-descriptions"],[1,"label-descriptions"]],template:function(e,i){1&e&&(a.bc(0,"ion-header"),a.bc(1,"ion-toolbar",0),a.bc(2,"ion-buttons",1),a.jc("click",(function(){return i.back()})),a.Wb(3,"ion-icon",2),a.ac(),a.bc(4,"ion-title",3),a.bc(5,"label",4),a.Qc(6,"MAGIN"),a.ac(),a.ac(),a.ac(),a.ac(),a.bc(7,"ion-content"),a.Oc(8,m,6,2,"div",5),a.Oc(9,v,3,0,"div",6),a.bc(10,"div"),a.bc(11,"form",7),a.Oc(12,k,11,6,"div",8),a.bc(13,"div",9),a.bc(14,"ion-button",10),a.jc("click",(function(){return i.confirm()})),a.Qc(15,"Modificar"),a.ac(),a.ac(),a.ac(),a.ac(),a.ac()),2&e&&(a.Ib(8),a.uc("ngIf",i.usertk),a.Ib(1),a.uc("ngIf",i.profileUser),a.Ib(2),a.uc("formGroup",i.form),a.Ib(1),a.uc("ngForOf",i.profilesArray.controls),a.Ib(2),a.uc("disabled",!i.form.valid))},directives:[n.y,n.db,n.k,n.z,n.cb,n.s,r.m,o.w,o.q,o.i,r.l,n.j,n.F,o.d,n.E,o.j,n.q,n.c,o.p,o.g,n.x,n.P,n.r,n.l,n.m],pipes:[h.a],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.label-profile[_ngcontent-%COMP%]{font-size:17px;font-weight:700;letter-spacing:1px;color:#002a68;text-transform:capitalize}.card-1[_ngcontent-%COMP%]{--background:#002a68}.card-2[_ngcontent-%COMP%]{--background:#80b9f6}.card-3[_ngcontent-%COMP%]{--background:#0041a2}.card-descriptions-1[_ngcontent-%COMP%]{border-left:4px solid #002a68}.card-descriptions-2[_ngcontent-%COMP%]{border-left:4px solid #80b9f6}.card-descriptions-3[_ngcontent-%COMP%]{border-left:4px solid #0041a2}.itemback[_ngcontent-%COMP%]{color:#fff;text-decoration:none;width:95%;border-radius:10px}.content-descriptions[_ngcontent-%COMP%]{padding:5px}.label-descriptions[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.hr-descriptions[_ngcontent-%COMP%]{background-color:#9e9e9e}.card-profiles[_ngcontent-%COMP%]{margin:0;border-left:4px solid #094aa8;border-radius:10px;height:100%}"]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=a.Tb({type:e}),e.\u0275inj=a.Sb({factory:function(i){return new(i||e)},imports:[[s.j.forChild(P)],s.j]}),e})();var y=t("HsBR");let I=(()=>{class e{}return e.\u0275mod=a.Tb({type:e}),e.\u0275inj=a.Sb({factory:function(i){return new(i||e)},imports:[[r.c,o.k,n.eb,w,o.t,y.a]]}),e})()}}]);