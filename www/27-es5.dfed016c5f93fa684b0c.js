function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{nxSX:function(t,n,e){"use strict";e.r(n),e.d(n,"MensajeBusquedaPageModule",(function(){return C}));var i=e("ofXK"),a=e("3Pt+"),o=e("TEn/"),c=e("tyNb"),s=e("fXoL"),r=e("UsEe"),l=e("h7Fw"),d=e("7Vn+"),u=e("RnZ8"),f=e("3no8");function g(t,n){if(1&t&&(s.bc(0,"ion-item"),s.Wb(1,"ion-icon",16),s.bc(2,"ion-label",17),s.Qc(3),s.ac(),s.ac()),2&t){var e=s.nc(2);s.Ib(3),s.Tc("",e.data.name,"\xa0",e.data.lastname,"")}}function b(t,n){if(1&t&&(s.bc(0,"div"),s.Oc(1,g,4,2,"ion-item",7),s.ac()),2&t){var e=s.nc();s.Ib(1),s.uc("ngIf",e.transmiterID!==e.data.id)}}function h(t,n){if(1&t&&(s.bc(0,"div",20),s.bc(1,"span",21),s.Qc(2),s.ac(),s.bc(3,"div",22),s.Qc(4),s.oc(5,"date"),s.ac(),s.ac()),2&t){var e=s.nc().$implicit;s.Ib(2),s.Rc(e.message),s.Ib(2),s.Rc(s.qc(5,2,e.created_at,"short"))}}function m(t,n){if(1&t&&(s.bc(0,"div",23),s.bc(1,"div",24),s.Qc(2),s.ac(),s.bc(3,"div",25),s.Qc(4),s.oc(5,"date"),s.ac(),s.ac()),2&t){var e=s.nc().$implicit;s.Ib(2),s.Rc(e.message),s.Ib(2),s.Rc(s.qc(5,2,e.created_at,"short"))}}function p(t,n){if(1&t&&(s.bc(0,"div"),s.Oc(1,h,6,5,"div",18),s.Oc(2,m,6,5,"div",19),s.ac()),2&t){var e=n.$implicit,i=s.nc();s.Ib(1),s.uc("ngIf",i.transmiterID!==e.user_id),s.Ib(1),s.uc("ngIf",i.transmiterID===e.user_id)}}var v,k,x,w=[{path:"",component:(v=function(){function t(n,e,i,a,o,c){_classCallCheck(this,t),this.router=n,this.chatS=e,this.pObjecto=i,this.auth=a,this.pusher=o,this.loadingService=c,this.newMsg=null,this.getToken()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"getToken",value:function(){var t=this;this.auth.gettokenLog().then((function(n){t.token=n,t.loadPage()}))}},{key:"loadPage",value:function(){var t=this,n=this.pObjecto.getNavData();n&&(this.data=n.infoDt,this.transmiterID=n.transferID,this.usuarioActual=n.useractual,this.pusher.channelsuscribe(this.data.id),this.pusher.init().bind("chat_event",(function(n){t.updateMsg(n)})),this.idChat&&this.chatS.var.subscribe((function(n){t.chatS.getchatsMSGUser(t.idChat,t.token).subscribe((function(n){t.menjs=n.data,setTimeout((function(){t.content.scrollToBottom(200)}))}))})))}},{key:"updateMsg",value:function(t){this.menjs.push(t.message),this.content.scrollToBottom(100)}},{key:"enviarMsg",value:function(){var t=this;this.newMsg&&(this.loadingService.loadingPresent({spinner:"circles"}),this.chatS.crearChat(this.transmiterID,this.data.id,this.token).subscribe((function(n){t.idChat=n.data.id,t.chatS.enviarMensajeChat(n.data.id,t.transmiterID,t.newMsg,t.token).subscribe((function(e){t.chatS.getchatsMSGUser(n.data.id,t.token).subscribe((function(n){t.menjs=n.data,t.chatS.var.next("update mgs"),setTimeout((function(){t.content.scrollToBottom()})),t.loadingService.loadingDismiss()}),(function(n){t.loadingService.loadingDismiss()})),t.newMsg=null}),(function(n){t.loadingService.loadingDismiss()}))}),(function(n){t.loadingService.loadingDismiss()})))}},{key:"volver",value:function(){this.router.navigate(["/users/chat"])}}]),t}(),v.\u0275fac=function(t){return new(t||v)(s.Vb(c.h),s.Vb(r.a),s.Vb(l.a),s.Vb(d.a),s.Vb(u.a),s.Vb(f.a))},v.\u0275cmp=s.Pb({type:v,selectors:[["app-mensaje-busqueda"]],viewQuery:function(t,n){var e;1&t&&s.Wc(o.s,!0),2&t&&s.Dc(e=s.kc())&&(n.content=e.first)},decls:22,vars:4,consts:[[1,"ion-toolbar-ccs"],["slot","start",2,"color","white"],[3,"click"],["name","arrow-back"],[1,"tituloInfo","logo"],[2,"color","white"],[1,"message-wrap"],[4,"ngIf"],[1,"message"],[4,"ngFor","ngForOf"],[1,"ion-align-items-center","ion-no-padding"],["size","10"],["autosize","","maxRow","4","placeholder","Escribe un mensaje",1,"msg-input",3,"ngModel","ngModelChange"],["size","2",1,"send"],["expand","block",1,"msg-btn",3,"disabled","click"],["name","send-outline"],["name","person-circle-outline",2,"color","black"],[2,"margin-left","5px",";text-transform","capitalize","font-size","20px"],["class","message other-message left",4,"ngIf"],["class","message my-message right",4,"ngIf"],[1,"message","other-message","left"],[2,"color","white","font-size","16px"],[1,"ion-text-left",2,"color","#ffffff","font-size","11px","margin-right","15px"],[1,"message","my-message","right"],[1,"ion-text-right",2,"color","white","font-size","16px"],[1,"time","ion-text-right",2,"color","white","font-size","11px"]],template:function(t,n){1&t&&(s.bc(0,"ion-header"),s.bc(1,"ion-toolbar",0),s.bc(2,"ion-buttons",1),s.bc(3,"ion-button",2),s.jc("click",(function(){return n.volver()})),s.Wb(4,"ion-icon",3),s.ac(),s.ac(),s.bc(5,"ion-title",4),s.bc(6,"label",5),s.Qc(7,"MAGIN"),s.ac(),s.ac(),s.ac(),s.ac(),s.bc(8,"ion-content",6),s.bc(9,"ion-header"),s.Oc(10,b,2,1,"div",7),s.ac(),s.bc(11,"div",8),s.Oc(12,p,3,2,"div",9),s.ac(),s.ac(),s.bc(13,"ion-footer"),s.bc(14,"ion-toolbar"),s.bc(15,"ion-row",10),s.bc(16,"ion-col",11),s.bc(17,"textarea",12),s.jc("ngModelChange",(function(t){return n.newMsg=t})),s.Qc(18,"        "),s.ac(),s.ac(),s.bc(19,"ion-col",13),s.bc(20,"button",14),s.jc("click",(function(){return n.enviarMsg()})),s.Wb(21,"ion-icon",15),s.ac(),s.ac(),s.ac(),s.ac(),s.ac()),2&t&&(s.Ib(10),s.uc("ngIf",n.data),s.Ib(2),s.uc("ngForOf",n.menjs),s.Ib(5),s.uc("ngModel",n.newMsg),s.Ib(3),s.uc("disabled",!n.newMsg))},directives:[o.y,o.db,o.k,o.j,o.z,o.cb,o.s,i.m,i.l,o.w,o.P,o.r,a.c,a.p,a.s,o.E,o.F],pipes:[i.f],styles:[".mensaje[_ngcontent-%COMP%]{padding:10px;border-radius:10px;margin-bottom:4px;white-space:pre-wrap}.usuarios[_ngcontent-%COMP%]{background:var(--ion-color-tertiary);color:#fff}.mi-usuarios[_ngcontent-%COMP%]{color:#fff;background-color:#8bc34a;text-align:right}.time[_ngcontent-%COMP%]{color:#dfdfdf;float:right;font-size:small;margin-left:15px}.msg-input[_ngcontent-%COMP%]{width:100%;border:1px solid #d4d4d4;border-radius:6px;background:#fff;resize:none;margin-top:0;--padding-start:8px}.msg-btn[_ngcontent-%COMP%]{font-size:30px;color:#fff;background-color:transparent;margin:5px 0 0 5px}*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.send[_ngcontent-%COMP%]{background:#002a68;-moz-text-align-last:center;text-align-last:center;border-radius:90%;height:50px;max-width:55px!important}.message[_ngcontent-%COMP%]{padding:9px!important;border-radius:10px!important;margin-bottom:8px!important;white-space:pre-wrap;display:block}.other-message.left[_ngcontent-%COMP%]{float:left;background-color:#2196f3!important;border:1px solid #d4d4d4;margin-right:35%!important;color:#fff}.my-message.right[_ngcontent-%COMP%]{float:right;background-color:#8bc34a!important;color:#000!important;border:1px solid #d6d6d6;margin-left:35%!important}"]}),v)}],M=((x=function t(){_classCallCheck(this,t)}).\u0275mod=s.Tb({type:x}),x.\u0275inj=s.Sb({factory:function(t){return new(t||x)},imports:[[c.j.forChild(w)],c.j]}),x),C=((k=function t(){_classCallCheck(this,t)}).\u0275mod=s.Tb({type:k}),k.\u0275inj=s.Sb({factory:function(t){return new(t||k)},imports:[[i.c,a.k,o.eb,M]]}),k)}}]);