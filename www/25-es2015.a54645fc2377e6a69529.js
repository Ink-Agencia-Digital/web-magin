(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{vyRW:function(o,t,r){"use strict";r.r(t),r.d(t,"ChangePasswordPageModule",(function(){return v}));var s=r("ofXK"),n=r("3Pt+"),e=r("TEn/"),a=r("tyNb"),i=r("mrSG"),c=r("fXoL"),d=r("7Vn+"),l=r("8rbx"),m=r("dNgK"),b=r("3no8"),f=r("VnPy");function p(o,t){if(1&o&&(c.bc(0,"ion-label",23),c.Qc(1),c.ac()),2&o){const o=c.nc();c.Ib(1),c.Rc(o.message_header)}}function h(o,t){if(1&o&&(c.bc(0,"ion-label",24),c.Qc(1),c.ac()),2&o){const o=c.nc();c.Ib(1),c.Rc(o.usertk.name)}}function u(o,t){1&o&&(c.bc(0,"ion-item",25),c.bc(1,"ion-label",26),c.Qc(2,"La Contrase\xf1a debe tener: "),c.Wb(3,"br"),c.Qc(4,"1 numero "),c.Wb(5,"br"),c.Qc(6," 1 letra Mayuscula "),c.Wb(7,"br"),c.Qc(8," 1 letra minuscula "),c.Wb(9,"br"),c.Qc(10," y 8 o m\xe1s caracteres"),c.ac(),c.ac())}function g(o,t){1&o&&(c.bc(0,"ion-item",25),c.bc(1,"ion-label",27),c.Qc(2,"Las contrase\xf1as no coinciden"),c.ac(),c.ac())}const w=[{path:"",component:(()=>{class o{constructor(o,t,r,s,n,e){this.auth=o,this.log=t,this.snackbar=r,this.loadingService=s,this.sharedService=n,this.route=e,this.submitted=!1,this.passwordPattern=/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/,this.showpassword=!1,this.passwordToggleIcon="eye",this.showpasswordConfirm=!1,this.passwordToggleIconConfirm="eye",this.usertk=null}ngOnInit(){this.getDataInfo(),this.getCurrentHour(),this.loadForm()}getDataInfo(){this.auth.gettokenLog().then(o=>{this.log.logdataInfData(o).subscribe(o=>{this.usertk=o})})}loadForm(){this.form=new n.h({password:new n.f("",[n.v.required,n.v.minLength(8),n.v.maxLength(12),n.v.pattern(this.passwordPattern)]),password_confirmation:new n.f("",[n.v.required])},{validators:this.matchingPasswords("password","password_confirmation")})}matchingPasswords(o,t){return r=>{if(r.controls[o].value!==r.controls[t].value)return{mismatchedPasswords:!0}}}changePassword(){if(!this.form.valid&&this.usertk.id)return this.mostrarmensaje("Los datos ingresados no son validos","Error","red-snackbar"),!1;{const o=this.form.value.password,t=this.form.value.password_confirmation;this.loadingService.loadingPresent({spinner:"circles"}),this.sharedService.resetPassword(this.usertk.id,o,t).subscribe(o=>Object(i.b)(this,void 0,void 0,(function*(){o?(this.loadingService.loadingDismiss(),this.mostrarmensaje("La contrase\xf1a se ha cambiado exitosamente","OK","green-snackbar"),this.loadForm(),this.route.navigateByUrl(null===this.usertk.profile_id?"/slides":"/users/home")):(this.loadingService.loadingDismiss(),this.mostrarmensaje("El email no se encuentra registrado en el sistema","Error","red-snackbar"))})),o=>{this.loadingService.loadingDismiss(),this.mostrarmensaje("Error restableciendo la contrase\xf1a","Error","red-snackbar"),this.auth.logout()})}}showpass(){this.showpassword=!this.showpassword,this.passwordToggleIcon="eye"===this.passwordToggleIcon?"eye-off":"eye"}showpassConfirm(){this.showpasswordConfirm=!this.showpasswordConfirm,this.passwordToggleIconConfirm="eye"===this.passwordToggleIconConfirm?"eye-off":"eye"}getCurrentHour(){var o=(new Date).getHours();this.message_header=o<12?"Buenos d\xedas":o<18?"Buenas tardes":"Buenas noches"}mostrarmensaje(o,t,r){this.snackbar.open(o,t,{duration:2e3,panelClass:[r]})}}return o.\u0275fac=function(t){return new(t||o)(c.Vb(d.a),c.Vb(l.a),c.Vb(m.a),c.Vb(b.a),c.Vb(f.a),c.Vb(a.h))},o.\u0275cmp=c.Pb({type:o,selectors:[["app-change-password"]],decls:33,vars:10,consts:[["header",""],[1,"ion-toolbar-ccs"],["toolbar",""],[1,"logo"],["size","4"],[1,"icon-header"],["src","/assets/finallogo.png","width","120","height","70"],["size","8",2,"align-self","flex-end"],[1,"info-header"],["style","font-size: 14px;color: #fff;margin-right: 5px;",4,"ngIf"],["style","font-size: 14px;color: #fff;text-transform: capitalize;",4,"ngIf"],[1,"ion-content-login"],[1,"container-password"],[1,"title-css"],[1,"mt-20"],[1,"mt-30"],[3,"formGroup"],[1,"item-form"],["name","contrasena","placeholder","Contrase\xf1a","formControlName","password",3,"type"],["slot","end",3,"name","click"],["class","form-text-error",4,"ngIf"],["placeholder","Confirmar Contrase\xf1a","formControlName","password_confirmation","show-password","",3,"type"],["type","submit","expand","block",1,"button-css",3,"disabled","click"],[2,"font-size","14px","color","#fff","margin-right","5px"],[2,"font-size","14px","color","#fff","text-transform","capitalize"],[1,"form-text-error"],[1,"l-error"],["no-margin","","stacked","",1,"l-error"]],template:function(o,t){1&o&&(c.bc(0,"ion-header",null,0),c.bc(2,"ion-toolbar",1,2),c.bc(4,"div"),c.bc(5,"ion-toolbar"),c.bc(6,"ion-row",3),c.bc(7,"ion-col",4),c.bc(8,"div",5),c.Wb(9,"img",6),c.ac(),c.ac(),c.bc(10,"ion-col",7),c.bc(11,"div",8),c.Oc(12,p,2,1,"ion-label",9),c.Oc(13,h,2,1,"ion-label",10),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.bc(14,"ion-content",11),c.bc(15,"div",12),c.bc(16,"ion-card-title",13),c.Qc(17,"Cambio de contrase\xf1a"),c.ac(),c.bc(18,"ion-card-subtitle",14),c.Qc(19,"Hemos detectado que tu contrase\xf1a fue generada automaticamente. Por favor cambia la contrase\xf1a para continuar"),c.ac(),c.bc(20,"div",15),c.bc(21,"form",16),c.bc(22,"ion-item",17),c.Wb(23,"ion-input",18),c.bc(24,"ion-icon",19),c.jc("click",(function(){return t.showpass()})),c.ac(),c.ac(),c.Oc(25,u,11,0,"ion-item",20),c.bc(26,"ion-item",17),c.Wb(27,"ion-input",21),c.bc(28,"ion-icon",19),c.jc("click",(function(){return t.showpassConfirm()})),c.ac(),c.ac(),c.Oc(29,g,3,0,"ion-item",20),c.bc(30,"div"),c.bc(31,"ion-button",22),c.jc("click",(function(){return t.changePassword()})),c.Qc(32,"Cambiar contrase\xf1a"),c.ac(),c.ac(),c.ac(),c.ac(),c.ac(),c.ac()),2&o&&(c.Ib(12),c.uc("ngIf",t.usertk),c.Ib(1),c.uc("ngIf",t.usertk),c.Ib(8),c.uc("formGroup",t.form),c.Ib(2),c.uc("type",t.showpassword?"text":"password"),c.Ib(1),c.uc("name",t.passwordToggleIcon),c.Ib(1),c.uc("ngIf",!t.form.controls.password.valid&&(t.form.controls.password.touched||t.form.controls.password.dirty)),c.Ib(2),c.uc("type",t.showpasswordConfirm?"text":"password"),c.Ib(1),c.uc("name",t.passwordToggleIconConfirm),c.Ib(1),c.uc("ngIf",t.form.controls.password_confirmation.touched&&t.form.hasError("mismatchedPasswords")&&t.form.controls.password.valid),c.Ib(2),c.uc("disabled",!t.form.valid))},directives:[e.y,e.db,e.P,e.r,s.m,e.s,e.p,e.o,n.w,n.q,n.i,e.E,e.D,e.pb,n.p,n.g,e.z,e.j,e.F],styles:["*[_ngcontent-%COMP%]{font-family:Proxima Nova!important}.container-password[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.mt-30[_ngcontent-%COMP%]{margin-top:30px}.item-form[_ngcontent-%COMP%]{background-color:hsla(0,0%,96.5%,.4745098039215686);border:none;font-size:11px;color:#000;font-size:13px;width:85%;height:45px;margin:0 auto 10px;border-radius:8px;--background:rgba(252,250,250,0.541)!important}.button-css[_ngcontent-%COMP%], .item-form[_ngcontent-%COMP%]{letter-spacing:1px;text-decoration:none;transition:all .3s ease-in-out;text-align:center}.button-css[_ngcontent-%COMP%]{box-shadow:0 10px 30px 0 rgba(95,186,233,.4);font-size:11px;margin:10px 0 0;border:none;display:inline-block;text-transform:uppercase;width:82%;height:35px;color:#fff;--background:#002a68!important}.form-text-error[_ngcontent-%COMP%]{font-size:11px;letter-spacing:1px;color:#721c24;background:#f5c6cb;border-color:#f5c6cb;font-size:smaller;transition:all .3s ease-in-out;text-decoration:none;margin:0 auto 10px;width:85%;border-radius:8px}.l-error[_ngcontent-%COMP%]{color:#f44336;font-weight:500}"]}),o})()}];let x=(()=>{class o{}return o.\u0275mod=c.Tb({type:o}),o.\u0275inj=c.Sb({factory:function(t){return new(t||o)},imports:[[a.j.forChild(w)],a.j]}),o})(),v=(()=>{class o{}return o.\u0275mod=c.Tb({type:o}),o.\u0275inj=c.Sb({factory:function(t){return new(t||o)},imports:[[s.c,n.t,e.eb,x]]}),o})()}}]);